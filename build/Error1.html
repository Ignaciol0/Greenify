<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="initial-scale=1, width=device-width"><link rel="stylesheet" href="/Error1.3ed97369.css"><link rel="stylesheet" href="/Error1.2e70848d.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap"><script type="module">let t,e,n;var r,i,s,o,a,l,h,u,f,c,d,p,g,m,y,v,w,b,E,T,_,I,A=globalThis,x={},S=x={};function C(){throw Error("setTimeout has not been defined")}function D(){throw Error("clearTimeout has not been defined")}function N(t){if(i===setTimeout)return setTimeout(t,0);if((i===C||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:C}catch(t){i=C}try{s="function"==typeof clearTimeout?clearTimeout:D}catch(t){s=D}}();var k=[],R=!1,O=-1;function L(){R&&o&&(R=!1,o.length?k=o.concat(k):O=-1,k.length&&P())}function P(){if(!R){var t=N(L);R=!0;for(var e=k.length;e;){for(o=k,k=[];++O<e;)o&&o[O].run();O=-1,e=k.length}o=null,R=!1,function(t){if(s===clearTimeout)return clearTimeout(t);if((s===D||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(t)}}function M(t,e){this.fun=t,this.array=e}function B(){}S.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];k.push(new M(t,e)),1!==k.length||R||N(P)},M.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=B,S.addListener=B,S.once=B,S.off=B,S.removeListener=B,S.removeAllListeners=B,S.emit=B,S.prependListener=B,S.prependOnceListener=B,S.listeners=function(t){return[]},S.binding=function(t){throw Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(t){throw Error("process.chdir is not supported")},S.umask=function(){return 0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:((64512&i)==55296&&r+1<t.length&&(64512&t.charCodeAt(r+1))==56320?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e},F=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")},V={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){let i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,l=a?t[e+2]:0,h=i>>2,u=(3&i)<<4|o>>4,f=(15&o)<<2|l>>6,c=63&l;a||(c=64,s||(f=64)),r.push(n[h],n[u],n[f],n[c])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(U(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):F(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){let i=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0,o=++e<t.length?n[t.charAt(e)]:64,a=++e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==s||null==o||null==a)throw new j;let l=i<<2|s>>4;if(r.push(l),64!==o){let t=s<<4&240|o>>2;if(r.push(t),64!==a){let t=o<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class j extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $=function(t){let e=U(t);return V.encodeByteArray(e,!0)},z=function(t){return $(t).replace(/\./g,"")},q=function(t){try{return V.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},G=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==A)return A;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,H=()=>{if(void 0===x||void 0===x.env)return;let t=void 0;if(t)return JSON.parse(t)},K=()=>{let t;if("undefined"==typeof document)return;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}let e=t&&q(t[1]);return e&&JSON.parse(e)},Q=()=>{try{return G()||H()||K()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X=t=>{var e,n;return null===(n=null===(e=Q())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},W=t=>{let e=X(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Y=()=>{var t;return null===(t=Q())||void 0===t?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}class Z extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){let n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?i.replace(te,(t,e)=>{let r=n[e];return null!=r?String(r):`<${e}?>`}):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new Z(r,o,n)}}const te=/\{\$([^}]+)}/g;function tn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let n=t[i],s=e[i];if(tr(n)&&tr(s)){if(!tn(n,s))return!1}else if(n!==s)return!1}for(let t of r)if(!n.includes(t))return!1;return!0}function tr(t){return null!==t&&"object"==typeof t}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){return t&&t._delegate?t._delegate:t}class ts{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let t=new J;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:to})}catch(t){}for(let[t,e]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(t);try{let t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=to){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){let t=Array.from(this.instances.values());await Promise.all([...t.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...t.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return null!=this.component}isInitialized(t=to){return this.instances.has(t)}getOptions(t=to){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(let[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;let r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){let n=this.onInitCallbacks.get(e);if(n)for(let r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:t===to?void 0:t,options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}return n||null}normalizeInstanceIdentifier(t=to){return this.component?this.component.multipleInstances?t:to:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new ta(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=[];(r=a||(a={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";const tu={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},tf=a.INFO,tc={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},td=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=tc[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tp{constructor(t){this.name=t,this._logLevel=tf,this._logHandler=td,this._userLogHandler=null,th.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in a))throw TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?tu[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...t),this._logHandler(this,a.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...t),this._logHandler(this,a.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,a.INFO,...t),this._logHandler(this,a.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,a.WARN,...t),this._logHandler(this,a.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...t),this._logHandler(this,a.ERROR,...t)}}const tg=(t,e)=>e.some(e=>t instanceof e),tm=new WeakMap,ty=new WeakMap,tv=new WeakMap,tw=new WeakMap,tb=new WeakMap;let tE={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return ty.get(t);if("objectStoreNames"===e)return t.objectStoreNames||tv.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tT(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function tT(n){var r;if(n instanceof IDBRequest)return function(t){let e=new Promise((e,n)=>{let r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(tT(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(e=>{e instanceof IDBCursor&&tm.set(e,t)}).catch(()=>{}),tb.set(e,t),e}(n);if(tw.has(n))return tw.get(n);let i="function"==typeof(r=n)?r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(e||(e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(r)?function(...t){return r.apply(t_(this),t),tT(tm.get(this))}:function(...t){return tT(r.apply(t_(this),t))}:function(t,...e){let n=r.call(t_(this),t,...e);return tv.set(n,t.sort?t.sort():[t]),tT(n)}:(r instanceof IDBTransaction&&function(t){if(ty.has(t))return;let e=new Promise((e,n)=>{let r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});ty.set(t,e)}(r),tg(r,t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(r,tE):r;return i!==n&&(tw.set(n,i),tb.set(i,n)),i}const t_=t=>tb.get(t),tI=["get","getKey","getAll","getAllKeys","count"],tA=["put","add","delete","clear"],tx=new Map;function tS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&"string"==typeof e))return;if(tx.get(e))return tx.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=tA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tI.includes(n)))return;let s=async function(t,...e){let s=this.transaction(t,i?"readwrite":"readonly"),o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return tx.set(e,s),s}tE={...n=tE,get:(t,e,r)=>tS(t,e)||n.get(t,e,r),has:(t,e)=>!!tS(t,e)||n.has(t,e)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(!function(t){let e=t.getComponent();return(null==e?void 0:e.type)==="VERSION"}(t))return null;{let e=t.getImmediate();return`${e.library}/${e.version}`}}).filter(t=>t).join(" ")}}const tD="@firebase/app",tN="0.10.12",tk=new tp("@firebase/app"),tR="[DEFAULT]",tO={[tD]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},tL=new Map,tP=new Map,tM=new Map;function tB(t,e){try{t.container.addComponent(e)}catch(n){tk.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tU(t){let e=t.name;if(tM.has(e))return tk.debug(`There were multiple attempts to register component ${e}.`),!1;for(let n of(tM.set(e,t),tL.values()))tB(n,t);for(let e of tP.values())tB(e,t);return!0}const tF=new tt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw tF.create("app-deleted",{appName:this._name})}}function tj(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});let r=Object.assign({name:tR,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw tF.create("bad-app-name",{appName:String(i)});if(n||(n=Y()),!n)throw tF.create("no-options");let s=tL.get(i);if(s){if(tn(n,s.options)&&tn(r,s.config))return s;throw tF.create("duplicate-app",{appName:i})}let o=new tl(i);for(let t of tM.values())o.addComponent(t);let a=new tV(n,r,o);return tL.set(i,a),a}function t$(t,e,n){var r;let i=null!==(r=tO[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let t=[`Unable to register library "${i}" with version "${e}":`];s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tk.warn(t.join(" "));return}tU(new ts(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const tz="firebase-heartbeat-store";let tq=null;function tG(){return tq||(tq=(function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,1),a=tT(o);return r&&o.addEventListener("upgradeneeded",t=>{r(tT(o.result),t.oldVersion,t.newVersion,tT(o.transaction),t)}),n&&o.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),a.then(t=>{s&&t.addEventListener("close",()=>s()),i&&t.addEventListener("versionchange",t=>i(t.oldVersion,t.newVersion,t))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(tz)}catch(t){console.warn(t)}}}).catch(t=>{throw tF.create("idb-open",{originalErrorMessage:t.message})})),tq}async function tH(t){try{let e=(await tG()).transaction(tz),n=await e.objectStore(tz).get(tQ(t));return await e.done,n}catch(t){if(t instanceof Z)tk.warn(t.message);else{let e=tF.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});tk.warn(e.message)}}}async function tK(t,e){try{let n=(await tG()).transaction(tz,"readwrite"),r=n.objectStore(tz);await r.put(e,tQ(t)),await n.done}catch(t){if(t instanceof Z)tk.warn(t.message);else{let e=tF.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});tk.warn(e.message)}}}function tQ(t){return`${t.name}!${t.options.appId}`}class tX{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new tY(e),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}async triggerHeartbeat(){var t,e;try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=tW();if((null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(t=>t.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(t=>{let e=new Date(t.date).valueOf();return Date.now()-e<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(t){tk.warn(t)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let e=tW(),{heartbeatsToSend:n,unsentEntries:r}=function(t,e=1024){let n=[],r=t.slice();for(let i of t){let t=n.find(t=>t.agent===i.agent);if(t){if(t.dates.push(i.date),tJ(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tJ(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=z(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return tk.warn(t),""}}}function tW(){return new Date().toISOString().substring(0,10)}class tY{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let t=await tH(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){let n=await this.read();return tK(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){let n=await this.read();return tK(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function tJ(t){return z(JSON.stringify({version:2,heartbeats:t})).length}tU(new ts("platform-logger",t=>new tC(t),"PRIVATE")),tU(new ts("heartbeat",t=>new tX(t),"PRIVATE")),t$(tD,tN,""),t$(tD,tN,"esm2017"),t$("fire-js",""),/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t$("firebase","10.14.0","app");var tZ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==A?A:"undefined"!=typeof self?self:{},t0={};(function(){function t(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function e(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+0xd76aa478&0xffffffff;o=s+(i^(e=n+(o<<7&0xffffffff|o>>>25))&(n^i))+r[1]+0xe8c7b756&0xffffffff,o=i+(n^(s=e+(o<<12&0xffffffff|o>>>20))&(e^n))+r[2]+0x242070db&0xffffffff,o=n+(e^(i=s+(o<<17&0xffffffff|o>>>15))&(s^e))+r[3]+0xc1bdceee&0xffffffff,o=e+(s^(n=i+(o<<22&0xffffffff|o>>>10))&(i^s))+r[4]+0xf57c0faf&0xffffffff,o=s+(i^(e=n+(o<<7&0xffffffff|o>>>25))&(n^i))+r[5]+0x4787c62a&0xffffffff,o=i+(n^(s=e+(o<<12&0xffffffff|o>>>20))&(e^n))+r[6]+0xa8304613&0xffffffff,o=n+(e^(i=s+(o<<17&0xffffffff|o>>>15))&(s^e))+r[7]+0xfd469501&0xffffffff,o=e+(s^(n=i+(o<<22&0xffffffff|o>>>10))&(i^s))+r[8]+0x698098d8&0xffffffff,o=s+(i^(e=n+(o<<7&0xffffffff|o>>>25))&(n^i))+r[9]+0x8b44f7af&0xffffffff,o=i+(n^(s=e+(o<<12&0xffffffff|o>>>20))&(e^n))+r[10]+0xffff5bb1&0xffffffff,o=n+(e^(i=s+(o<<17&0xffffffff|o>>>15))&(s^e))+r[11]+0x895cd7be&0xffffffff,o=e+(s^(n=i+(o<<22&0xffffffff|o>>>10))&(i^s))+r[12]+0x6b901122&0xffffffff,o=s+(i^(e=n+(o<<7&0xffffffff|o>>>25))&(n^i))+r[13]+0xfd987193&0xffffffff,o=i+(n^(s=e+(o<<12&0xffffffff|o>>>20))&(e^n))+r[14]+0xa679438e&0xffffffff,o=n+(e^(i=s+(o<<17&0xffffffff|o>>>15))&(s^e))+r[15]+0x49b40821&0xffffffff,n=i+(o<<22&0xffffffff|o>>>10),o=e+(i^s&(n^i))+r[1]+0xf61e2562&0xffffffff,e=n+(o<<5&0xffffffff|o>>>27),o=s+(n^i&(e^n))+r[6]+0xc040b340&0xffffffff,s=e+(o<<9&0xffffffff|o>>>23),o=i+(e^n&(s^e))+r[11]+0x265e5a51&0xffffffff,i=s+(o<<14&0xffffffff|o>>>18),o=n+(s^e&(i^s))+r[0]+0xe9b6c7aa&0xffffffff,n=i+(o<<20&0xffffffff|o>>>12),o=e+(i^s&(n^i))+r[5]+0xd62f105d&0xffffffff,e=n+(o<<5&0xffffffff|o>>>27),o=s+(n^i&(e^n))+r[10]+0x2441453&0xffffffff,s=e+(o<<9&0xffffffff|o>>>23),o=i+(e^n&(s^e))+r[15]+0xd8a1e681&0xffffffff,i=s+(o<<14&0xffffffff|o>>>18),o=n+(s^e&(i^s))+r[4]+0xe7d3fbc8&0xffffffff,n=i+(o<<20&0xffffffff|o>>>12),o=e+(i^s&(n^i))+r[9]+0x21e1cde6&0xffffffff,e=n+(o<<5&0xffffffff|o>>>27),o=s+(n^i&(e^n))+r[14]+0xc33707d6&0xffffffff,s=e+(o<<9&0xffffffff|o>>>23),o=i+(e^n&(s^e))+r[3]+0xf4d50d87&0xffffffff,i=s+(o<<14&0xffffffff|o>>>18),o=n+(s^e&(i^s))+r[8]+0x455a14ed&0xffffffff,n=i+(o<<20&0xffffffff|o>>>12),o=e+(i^s&(n^i))+r[13]+0xa9e3e905&0xffffffff,e=n+(o<<5&0xffffffff|o>>>27),o=s+(n^i&(e^n))+r[2]+0xfcefa3f8&0xffffffff,s=e+(o<<9&0xffffffff|o>>>23),o=i+(e^n&(s^e))+r[7]+0x676f02d9&0xffffffff,i=s+(o<<14&0xffffffff|o>>>18),o=n+(s^e&(i^s))+r[12]+0x8d2a4c8a&0xffffffff,o=e+((n=i+(o<<20&0xffffffff|o>>>12))^i^s)+r[5]+0xfffa3942&0xffffffff,o=s+((e=n+(o<<4&0xffffffff|o>>>28))^n^i)+r[8]+0x8771f681&0xffffffff,o=i+((s=e+(o<<11&0xffffffff|o>>>21))^e^n)+r[11]+0x6d9d6122&0xffffffff,o=n+((i=s+(o<<16&0xffffffff|o>>>16))^s^e)+r[14]+0xfde5380c&0xffffffff,o=e+((n=i+(o<<23&0xffffffff|o>>>9))^i^s)+r[1]+0xa4beea44&0xffffffff,o=s+((e=n+(o<<4&0xffffffff|o>>>28))^n^i)+r[4]+0x4bdecfa9&0xffffffff,o=i+((s=e+(o<<11&0xffffffff|o>>>21))^e^n)+r[7]+0xf6bb4b60&0xffffffff,o=n+((i=s+(o<<16&0xffffffff|o>>>16))^s^e)+r[10]+0xbebfbc70&0xffffffff,o=e+((n=i+(o<<23&0xffffffff|o>>>9))^i^s)+r[13]+0x289b7ec6&0xffffffff,o=s+((e=n+(o<<4&0xffffffff|o>>>28))^n^i)+r[0]+0xeaa127fa&0xffffffff,o=i+((s=e+(o<<11&0xffffffff|o>>>21))^e^n)+r[3]+0xd4ef3085&0xffffffff,o=n+((i=s+(o<<16&0xffffffff|o>>>16))^s^e)+r[6]+0x4881d05&0xffffffff,o=e+((n=i+(o<<23&0xffffffff|o>>>9))^i^s)+r[9]+0xd9d4d039&0xffffffff,o=s+((e=n+(o<<4&0xffffffff|o>>>28))^n^i)+r[12]+0xe6db99e5&0xffffffff,o=i+((s=e+(o<<11&0xffffffff|o>>>21))^e^n)+r[15]+0x1fa27cf8&0xffffffff,o=n+((i=s+(o<<16&0xffffffff|o>>>16))^s^e)+r[2]+0xc4ac5665&0xffffffff,n=i+(o<<23&0xffffffff|o>>>9),o=e+(i^(n|~s))+r[0]+0xf4292244&0xffffffff,e=n+(o<<6&0xffffffff|o>>>26),o=s+(n^(e|~i))+r[7]+0x432aff97&0xffffffff,s=e+(o<<10&0xffffffff|o>>>22),o=i+(e^(s|~n))+r[14]+0xab9423a7&0xffffffff,i=s+(o<<15&0xffffffff|o>>>17),o=n+(s^(i|~e))+r[5]+0xfc93a039&0xffffffff,n=i+(o<<21&0xffffffff|o>>>11),o=e+(i^(n|~s))+r[12]+0x655b59c3&0xffffffff,e=n+(o<<6&0xffffffff|o>>>26),o=s+(n^(e|~i))+r[3]+0x8f0ccc92&0xffffffff,s=e+(o<<10&0xffffffff|o>>>22),o=i+(e^(s|~n))+r[10]+0xffeff47d&0xffffffff,i=s+(o<<15&0xffffffff|o>>>17),o=n+(s^(i|~e))+r[1]+0x85845dd1&0xffffffff,n=i+(o<<21&0xffffffff|o>>>11),o=e+(i^(n|~s))+r[8]+0x6fa87e4f&0xffffffff,e=n+(o<<6&0xffffffff|o>>>26),o=s+(n^(e|~i))+r[15]+0xfe2ce6e0&0xffffffff,s=e+(o<<10&0xffffffff|o>>>22),o=i+(e^(s|~n))+r[6]+0xa3014314&0xffffffff,i=s+(o<<15&0xffffffff|o>>>17),o=n+(s^(i|~e))+r[13]+0x4e0811a1&0xffffffff,n=i+(o<<21&0xffffffff|o>>>11),o=e+(i^(n|~s))+r[4]+0xf7537e82&0xffffffff,e=n+(o<<6&0xffffffff|o>>>26),o=s+(n^(e|~i))+r[11]+0xbd3af235&0xffffffff,s=e+(o<<10&0xffffffff|o>>>22),o=i+(e^(s|~n))+r[2]+0x2ad7d2bb&0xffffffff,i=s+(o<<15&0xffffffff|o>>>17),o=n+(s^(i|~e))+r[9]+0xeb86d391&0xffffffff,t.g[0]=t.g[0]+e&0xffffffff,t.g[1]=t.g[1]+(i+(o<<21&0xffffffff|o>>>11))&0xffffffff,t.g[2]=t.g[2]+i&0xffffffff,t.g[3]=t.g[3]+s&0xffffffff}function n(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},t.prototype.u=function(t,n){void 0===n&&(n=t.length);for(var r=n-this.blockSize,i=this.B,s=this.h,o=0;o<n;){if(0==s)for(;o<=r;)e(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<n;)if(i[s++]=t.charCodeAt(o++),s==this.blockSize){e(this,i),s=0;break}}else for(;o<n;)if(i[s++]=t[o++],s==this.blockSize){e(this,i),s=0;break}}this.h=s,this.o+=n},t.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var r,i={};function s(t){var e;return -128<=t&&128>t?(e=function(t){return new n([0|t],0>t?-1:0)},Object.prototype.hasOwnProperty.call(i,t)?i[t]:i[t]=e(t)):new n([0|t],0>t?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(0>t)return d(o(-t));for(var e=[],r=1,i=0;t>=r;i++)e[i]=t/r|0,r*=0x100000000;return new n(e,0)}var a=s(0),h=s(1),u=s(0x1000000);function f(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function c(t){return -1==t.h}function d(t){for(var e=t.g.length,r=[],i=0;i<e;i++)r[i]=~t.g[i];return new n(r,~t.h).add(h)}function p(t,e){return t.add(d(e))}function g(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function m(t,e){this.g=t,this.h=e}function y(t,e){if(f(e))throw Error("division by zero");if(f(t))return new m(a,a);if(c(t))return e=y(d(t),e),new m(d(e.g),d(e.h));if(c(e))return e=y(t,d(e)),new m(d(e.g),e.h);if(30<t.g.length){if(c(t)||c(e))throw Error("slowDivide_ only works with positive integers.");for(var n=h,r=e;0>=r.l(t);)n=v(n),r=v(r);var i=w(n,1),s=w(r,1);for(r=w(r,2),n=w(n,2);!f(r);){var l=s.add(r);0>=l.l(t)&&(i=i.add(n),s=l),r=w(r,1),n=w(n,1)}return e=p(t,i.j(e)),new m(i,e)}for(i=a;0<=t.l(e);){for(r=48>=(r=Math.ceil(Math.log(n=Math.max(1,Math.floor(t.m()/e.m())))/Math.LN2))?1:Math.pow(2,r-48),l=(s=o(n)).j(e);c(l)||0<l.l(t);)n-=r,l=(s=o(n)).j(e);f(s)&&(s=h),i=i.add(s),t=p(t,l)}return new m(i,t)}function v(t){for(var e=t.g.length+1,r=[],i=0;i<e;i++)r[i]=t.i(i)<<1|t.i(i-1)>>>31;return new n(r,t.h)}function w(t,e){var r=e>>5;e%=32;for(var i=t.g.length-r,s=[],o=0;o<i;o++)s[o]=0<e?t.i(o+r)>>>e|t.i(o+r+1)<<32-e:t.i(o+r);return new n(s,t.h)}(r=n.prototype).m=function(){if(c(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.i(n);t+=(0<=r?r:0x100000000+r)*e,e*=0x100000000}return t},r.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(f(this))return"0";if(c(this))return"-"+d(this).toString(t);for(var e=o(Math.pow(t,6)),n=this,r="";;){var i=y(n,e).g,s=((0<(n=p(n,i.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(f(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},r.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},r.l=function(t){return c(t=p(this,t))?-1:f(t)?0:1},r.abs=function(){return c(this)?d(this):this},r.add=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],i=0,s=0;s<=e;s++){var o=i+(65535&this.i(s))+(65535&t.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(t.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,r[s]=a<<16|o}return new n(r,-0x80000000&r[r.length-1]?-1:0)},r.j=function(t){if(f(this)||f(t))return a;if(c(this))return c(t)?d(this).j(d(t)):d(d(this).j(t));if(c(t))return d(this.j(d(t)));if(0>this.l(u)&&0>t.l(u))return o(this.m()*t.m());for(var e=this.g.length+t.g.length,r=[],i=0;i<2*e;i++)r[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<t.g.length;s++){var l=this.i(i)>>>16,h=65535&this.i(i),p=t.i(s)>>>16,m=65535&t.i(s);r[2*i+2*s]+=h*m,g(r,2*i+2*s),r[2*i+2*s+1]+=l*m,g(r,2*i+2*s+1),r[2*i+2*s+1]+=h*p,g(r,2*i+2*s+1),r[2*i+2*s+2]+=l*p,g(r,2*i+2*s+2)}for(i=0;i<e;i++)r[i]=r[2*i+1]<<16|r[2*i];for(i=e;i<2*e;i++)r[i]=0;return new n(r,0)},r.A=function(t){return y(this,t).h},r.and=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],i=0;i<e;i++)r[i]=this.i(i)&t.i(i);return new n(r,this.h&t.h)},r.or=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],i=0;i<e;i++)r[i]=this.i(i)|t.i(i);return new n(r,this.h|t.h)},r.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],i=0;i<e;i++)r[i]=this.i(i)^t.i(i);return new n(r,this.h^t.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,t0.Md5=t,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=o,n.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),h=parseInt(e.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(h))):i=(i=i.j(r)).add(o(h))}return i},l=t0.Integer=n}).apply(void 0!==tZ?tZ:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var t1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==A?A:"undefined"!=typeof self?self:{},t2={};(function(){var t,e,n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t},i=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t1&&t1];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,e){if(e)t:{var n=i;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in n))break t;n=n[o]}(e=e(s=n[t=t[t.length-1]]))!=s&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}("Array.prototype.values",function(t){return t||function(){var t,e,n,r,i;return t=this,e=function(t,e){return e},t instanceof String&&(t+=""),n=0,r=!1,(i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return i},i}});var s=s||{},o=this||self;function a(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function E(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function T(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function _(t,e){for(let e=1;e<arguments.length;e++){let n=arguments[e];if(a(n)){let e=t.length||0,r=n.length||0;t.length=e+r;for(let i=0;i<r;i++)t[e+i]=n[i]}else t.push(n)}}function I(t){return/^[\s\xa0]*$/.test(t)}function A(){var t=o.navigator;return t&&(t=t.userAgent)?t:""}function x(t){return x[" "](t),t}x[" "]=function(){};var S=-1!=A().indexOf("Gecko")&&!(-1!=A().toLowerCase().indexOf("webkit")&&-1==A().indexOf("Edge"))&&!(-1!=A().indexOf("Trident")||-1!=A().indexOf("MSIE"))&&-1==A().indexOf("Edge");function C(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function D(t){let e={};for(let n in t)e[n]=t[n];return e}let N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e])t[n]=r[n];for(let e=0;e<N.length;e++)n=N[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}var R=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new O,t=>t.reset());class O{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let L,P=!1,M=new class{constructor(){this.h=this.g=null}add(t,e){let n=R.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},B=()=>{let t=o.Promise.resolve(void 0);L=()=>{t.then(U)}};var U=()=>{let t;for(var e;t=null,M.g&&(t=M.g,M.g=M.g.next,M.g||(M.h=null),t.next=null),e=t;){try{e.h.call(e.g)}catch(t){!function(t){o.setTimeout(()=>{throw t},0)}(t)}R.j(e),100>R.h&&(R.h++,e.next=R.g,R.g=e)}P=!1};function F(){this.s=this.s,this.C=this.C}function V(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},V.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let t=()=>{};o.addEventListener("test",t,e),o.removeEventListener("test",t,e)}catch(t){}return t}();function $(t,e){if(V.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(S){t:{try{x(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:z[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$.aa.h.call(this)}}E($,V);var z={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),G=0;function H(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++G,this.da=this.fa=!1}function K(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Q(t){this.src=t,this.g={},this.h=0}function X(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Array.prototype.indexOf.call(i,e,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(K(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function W(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.da&&s.listener==e&&!!n==s.capture&&s.ha==r)return i}return -1}Q.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=W(t,e,r,i);return -1<o?(e=t[o],n||(e.fa=!1)):((e=new H(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var Y="closure_lm_"+(1e6*Math.random()|0),J={};function Z(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=l(i)?!!i.capture:!!i,a=tr(t);if(a||(t[Y]=a=new Q(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function t(e){return tn.call(t.src,t.listener,e)},n.proxy=r,r.src=t,r.listener=n,t.addEventListener)j||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(te(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function tt(t){if("number"!=typeof t&&t&&!t.da){var e=t.src;if(e&&e[q])X(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(te(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=tr(e))?(X(n,t),0==n.h&&(n.src=null,e[Y]=null)):K(t)}}}function te(t){return t in J?J[t]:J[t]="on"+t}function tn(t,e){if(t.da)t=!0;else{e=new $(e,this);var n=t.listener,r=t.ha||t.src;t.fa&&tt(t),t=n.call(r,e)}return t}function tr(t){return(t=t[Y])instanceof Q?t:null}var ti="__closure_events_fn_"+(1e9*Math.random()>>>0);function ts(t){return"function"==typeof t?t:(t[ti]||(t[ti]=function(e){return t.handleEvent(e)}),t[ti])}function to(){F.call(this),this.i=new Q(this),this.M=this,this.F=null}function ta(t,e){var n,r=t.F;if(r)for(n=[];r;r=r.F)n.push(r);if(t=t.M,r=e.type||e,"string"==typeof e)e=new V(e,t);else if(e instanceof V)e.target=e.target||t;else{var i=e;k(e=new V(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=tl(o,r,!0,e)&&i}if(i=tl(o=e.g=t,r,!0,e)&&i,i=tl(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=tl(o=e.g=n[s],r,!1,e)&&i}function tl(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&X(t.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function th(t,e,n){if("function"==typeof t)n&&(t=w(t,n));else if(t&&"function"==typeof t.handleEvent)t=w(t.handleEvent,t);else throw Error("Invalid listener argument");return 0x7fffffff<Number(e)?-1:o.setTimeout(t,e||0)}E(to,F),to.prototype[q]=!0,to.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,s){if(Array.isArray(n))for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);else(i=l(i)?!!i.capture:!!i,r=ts(r),e&&e[q])?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=W(o=e.g[n],r,i,s))&&(K(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete e.g[n],e.h--))):e&&(e=tr(e))&&(n=e.g[n.toString()],e=-1,n&&(e=W(n,r,i,s)),(r=-1<e?n[e]:null)&&tt(r))}(this,t,e,n,r)},to.prototype.N=function(){if(to.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)K(n[r]);delete e.g[t],e.h--}}this.F=null},to.prototype.K=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},to.prototype.L=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};class tu extends F{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:function t(e){e.g=th(()=>{e.g=null,e.i&&(e.i=!1,t(e))},e.l);let n=e.h;e.h=null,e.m.apply(null,n)}(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tf(t){F.call(this),this.h=t,this.g={}}E(tf,F);var tc=[];function td(t){C(t.g,function(t,e){this.g.hasOwnProperty(e)&&tt(t)},t),t.g={}}tf.prototype.N=function(){tf.aa.N.call(this),td(this)},tf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tp=o.JSON.stringify,tg=o.JSON.parse,tm=class{stringify(t){return o.JSON.stringify(t,void 0)}parse(t){return o.JSON.parse(t,void 0)}};function ty(){}function tv(t){return t.h||(t.h=t.i())}function tw(){}ty.prototype.h=null;var tb={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tE(){V.call(this,"d")}function tT(){V.call(this,"c")}E(tE,V),E(tT,V);var t_={},tI=null;function tA(){return tI=tI||new to}function tx(t){V.call(this,t_.La,t)}function tS(t){let e=tA();ta(e,new tx(e))}function tC(t,e){V.call(this,t_.STAT_EVENT,t),this.stat=e}function tD(t){let e=tA();ta(e,new tC(e,t))}function tN(t,e){V.call(this,t_.Ma,t),this.size=e}function tk(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){t()},e)}function tR(){this.g=!0}function tO(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}}return tp(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}t_.La="serverreachability",E(tx,V),t_.STAT_EVENT="statevent",E(tC,V),t_.Ma="timingevent",E(tN,V),tR.prototype.xa=function(){this.g=!1},tR.prototype.info=function(){};var tL={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tP={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function tM(){}function tB(t,e,n,r){this.j=t,this.i=e,this.l=n,this.R=r||1,this.U=new tf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tU}function tU(){this.i=null,this.g="",this.h=!1}E(tM,ty),tM.prototype.g=function(){return new XMLHttpRequest},tM.prototype.i=function(){return{}},e=new tM;var tF={},tV={};function tj(t,e,n){t.L=1,t.v=ei(t9(e)),t.m=n,t.P=!0,t$(t,null)}function t$(t,e){t.F=Date.now(),tq(t),t.A=t9(t.v);var n=t.A,r=t.R;Array.isArray(r)||(r=[String(r)]),ey(n.i,"t",r),t.C=0,n=t.j.J,t.h=new tU,t.g=e6(t.j,n?e:null,!t.m),0<t.O&&(t.M=new tu(w(t.Y,t,t.g),t.O)),e=t.U,n=t.g,r=t.ca;var i="readystatechange";Array.isArray(i)||(i&&(tc[0]=i.toString()),i=tc);for(var s=0;s<i.length;s++){var o=function t(e,n,r,i,s){if(i&&i.once)return function t(e,n,r,i,s){if(Array.isArray(n)){for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);return null}return r=ts(r),e&&e[q]?e.L(n,r,l(i)?!!i.capture:!!i,s):Z(e,n,r,!0,i,s)}(e,n,r,i,s);if(Array.isArray(n)){for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);return null}return r=ts(r),e&&e[q]?e.K(n,r,l(i)?!!i.capture:!!i,s):Z(e,n,r,!1,i,s)}(n,i[s],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?D(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),tS(),function(t,e,n,r,i,s){t.info(function(){if(t.g){if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var u=h[0];h=h[1];var f=u.split("_");o=2<=f.length&&"type"==f[1]?o+(u+"=")+h+"&":o+(u+"=redacted&")}}else o=null}else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.i,t.u,t.A,t.l,t.R,t.m)}function tz(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.j.Ca}function tq(t){t.S=Date.now()+t.I,tG(t,t.I)}function tG(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=tk(w(t.ba,t),e)}function tH(t){t.B&&(o.clearTimeout(t.B),t.B=null)}function tK(t){0==t.j.G||t.J||eJ(t.j,t)}function tQ(t){tH(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,td(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function tX(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||t0(n.h,t))){if(!t.K&&t0(n.h,t)&&3==n.G){try{var r=n.Da.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(n.g.F+3e3<t.F)eY(n),ej(n);else break t}eQ(n),tD(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=tk(w(n.Za,n),6e3));if(1>=tZ(n.h)&&n.ca){try{n.ca()}catch(t){}n.ca=void 0}}else e0(n,11)}else if((t.K||n.g==t)&&eY(n),!I(e))for(i=n.Da.g.parse(e),e=0;e<i.length;e++){let a=i[e];if(n.T=a[0],a=a[1],2==n.G){if("c"==a[0]){n.K=a[1],n.ia=a[2];let e=a[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));let i=a[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));let l=a[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;let h=t.g;if(h){let t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(t6(s,s.h),s.h=null))}if(r.D){let t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.ya=t,er(r.I,r.D,t))}}if(n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms")),(r=n).qa=e2(r,r.J?r.ia:null,r.W),t.K){t5(r.h,t);var o=r.L;o&&(t.I=o),t.B&&(tH(t),tq(t)),r.g=t}else eK(r);0<n.i.length&&ez(n)}else"stop"!=a[0]&&"close"!=a[0]||e0(n,7)}else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?e0(n,7):eV(n):"noop"!=a[0]&&n.l&&n.l.ta(a),n.v=0)}}tS(4)}catch(t){}}tB.prototype.ca=function(t){t=t.target;let e=this.M;e&&3==eM(t)?e.j():this.Y(t)},tB.prototype.Y=function(t){try{if(t==this.g)t:{let c=eM(this.g);var e=this.g.Ba();let d=this.g.Z();if(!(3>c)&&(3!=c||this.g&&(this.h.h||this.g.oa()||eB(this.g)))){this.J||4!=c||7==e||(8==e||0>=d?tS(3):tS(2)),tH(this);var n=this.g.Z();this.X=n;e:if(tz(this)){var r=eB(this.g);t="";var i=r.length,s=4==eM(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tQ(this),tK(this);var a="";break e}this.h.i=new o.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:!(s&&e==i-1)});r.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,c,n),this.o){if(this.T&&!this.K){e:{if(this.g){var l,h=this.g;if((l=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(l)){var u=l;break e}}u=null}if(n=u)tO(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tX(this,n);else{this.o=!1,this.s=3,tD(12),tQ(this),tK(this);break t}}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;)if((t=function(t,e){var n=t.C,r=e.indexOf("\n",n);return -1==r?tV:isNaN(n=Number(e.substring(n,r)))?tF:(r+=1)+n>e.length?tV:(e=e.slice(r,r+n),t.C=r+n,e)}(this,a))==tV){4==c&&(this.s=4,tD(14),n=!1),tO(this.i,this.l,null,"[Incomplete Response]");break}else if(t==tF){this.s=4,tD(15),tO(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}else tO(this.i,this.l,t,null),tX(this,t);if(tz(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=c||0!=a.length||this.h.h||(this.s=1,tD(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var f=this.j;f.g==this&&f.ba&&!f.M&&(f.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),eX(f),f.M=!0,tD(11))}}else tO(this.i,this.l,a,"[Invalid Chunked Response]"),tQ(this),tK(this)}else tO(this.i,this.l,a,null),tX(this,a);4==c&&tQ(this),this.o&&!this.J&&(4==c?eJ(this.j,this):(this.o=!1,tq(this)))}else(function(t){let e={};t=(t.g&&2<=eM(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(I(t[r]))continue;var n=function(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}(t[r]);let i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(let n in t)e.call(void 0,t[n],n,t)}(e,function(t){return t.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,tD(12)):(this.s=0,tD(13)),tQ(this),tK(this)}}}catch(t){}finally{}},tB.prototype.cancel=function(){this.J=!0,tQ(this)},tB.prototype.ba=function(){this.B=null;let t=Date.now();0<=t-this.S?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.i,this.A),2!=this.L&&(tS(),tD(17)),tQ(this),this.s=2,tK(this)):tG(this,this.S-t)};var tW=class{constructor(t,e){this.g=t,this.map=e}};function tY(t){this.l=t||10,t=o.PerformanceNavigationTiming?0<(t=o.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tJ(t){return!!t.h||!!t.g&&t.g.size>=t.j}function tZ(t){return t.h?1:t.g?t.g.size:0}function t0(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function t6(t,e){t.g?t.g.add(e):t.h=e}function t5(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function t3(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(let n of t.g.values())e=e.concat(n.D);return e}return T(t.i)}function t8(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(a(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(a(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(let r in e=[],n=0,t)e[n++]=r;return e}}}(t),r=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(a(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}tY.prototype.cancel=function(){if(this.i=t3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let t of this.g.values())t.cancel();this.g.clear()}};var t4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t7(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof t7){this.h=t.h,et(this,t.j),this.o=t.o,this.g=t.g,ee(this,t.s),this.l=t.l;var e=t.i,n=new ed;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),en(this,n),this.m=t.m}else t&&(e=String(t).match(t4))?(this.h=!1,et(this,e[1]||"",!0),this.o=es(e[2]||""),this.g=es(e[3]||"",!0),ee(this,e[4]),this.l=es(e[5]||"",!0),en(this,e[6]||"",!0),this.m=es(e[7]||"")):(this.h=!1,this.i=new ed(null,this.h))}function t9(t){return new t7(t)}function et(t,e,n){t.j=n?es(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ee(t,e){if(e){if(isNaN(e=Number(e))||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function en(t,e,n){var r,i;e instanceof ed?(t.i=e,r=t.i,(i=t.h)&&!r.j&&(ep(r),r.i=null,r.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(eg(this,e),ey(this,n,t))},r)),r.j=i):(n||(e=eo(e,ef)),t.i=new ed(e,t.h))}function er(t,e,n){t.i.set(e,n)}function ei(t){return er(t,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),t}function es(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function eo(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ea),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ea(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}t7.prototype.toString=function(){var t=[],e=this.j;e&&t.push(eo(e,el,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(eo(e,el,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(eo(n,"/"==n.charAt(0)?eu:eh,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",eo(n,ec)),t.join("")};var el=/[#\/\?@]/g,eh=/[#\?:]/g,eu=/[#\?]/g,ef=/[#\?@]/g,ec=/#/g;function ed(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ep(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function eg(t,e){ep(t),e=ev(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function em(t,e){return ep(t),e=ev(t,e),t.g.has(e)}function ey(t,e,n){eg(t,e),0<n.length&&(t.i=null,t.g.set(ev(t,e),T(n)),t.h+=n.length)}function ev(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ew(t,e,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(t){}}function eb(){this.g=new tm}function eE(t){this.l=t.Ub||null,this.j=t.eb||!1}function eT(t,e){to.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function e_(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function eI(t){t.readyState=4,t.l=null,t.j=null,t.v=null,eA(t)}function eA(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ex(t){let e="";return C(t,function(t,n){e+=n+":"+t+"\r\n"}),e}function eS(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=ex(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):er(t,e,n))}function eC(t){to.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=ed.prototype).add=function(t,e){ep(this),this.i=null,t=ev(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},n.forEach=function(t,e){ep(this),this.g.forEach(function(n,r){n.forEach(function(n){t.call(e,n,r,this)},this)},this)},n.na=function(){ep(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},n.V=function(t){ep(this);let e=[];if("string"==typeof t)em(this,t)&&(e=e.concat(this.g.get(ev(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},n.set=function(t,e){return ep(this),this.i=null,em(this,t=ev(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},n.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")},E(eE,ty),eE.prototype.g=function(){return new eT(this.l,this.j)},eE.prototype.i=(t={},function(){return t}),E(eT,to),(n=eT.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,eA(this)},n.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||o).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,eI(this)),this.readyState=0},n.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,eA(this)),this.g&&(this.readyState=3,eA(this),this.g))){if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==o.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;e_(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))}},n.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?eI(this):eA(this),3==this.readyState&&e_(this)}},n.Ra=function(t){this.g&&(this.response=this.responseText=t,eI(this))},n.Qa=function(t){this.g&&(this.response=t,eI(this))},n.ga=function(){this.g&&eI(this)},n.setRequestHeader=function(t,e){this.u.append(t,e)},n.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(eT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),E(eC,to);var eD=/^https?$/i,eN=["POST","PUT"];function ek(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,eR(t),eL(t)}function eR(t){t.A||(t.A=!0,ta(t,"complete"),ta(t,"error"))}function eO(t){if(t.h&&void 0!==s&&(!t.v[1]||4!=eM(t)||2!=t.Z())){if(t.u&&4==eM(t))th(t.Ea,0,t);else if(ta(t,"readystatechange"),4==eM(t)){t.h=!1;try{let s=t.Z();switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e,n,r=!0;break;default:r=!1}if(!(e=r)){if(n=0===s){var i=String(t.D).match(t4)[1]||null;!i&&o.self&&o.self.location&&(i=o.self.location.protocol.slice(0,-1)),n=!eD.test(i?i.toLowerCase():"")}e=n}if(e)ta(t,"complete"),ta(t,"success");else{t.m=6;try{var a=2<eM(t)?t.g.statusText:""}catch(t){a=""}t.l=a+" ["+t.Z()+"]",eR(t)}}finally{eL(t)}}}}function eL(t,e){if(t.g){eP(t);let n=t.g,r=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||ta(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function eP(t){t.I&&(o.clearTimeout(t.I),t.I=null)}function eM(t){return t.g?t.g.readyState:0}function eB(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function eU(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function eF(t){this.Aa=0,this.i=[],this.j=new tR,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eU("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eU("baseRetryDelayMs",5e3,t),this.cb=eU("retryDelaySeedMs",1e4,t),this.Wa=eU("forwardChannelMaxRetries",2,t),this.wa=eU("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new tY(t&&t.concurrentRequestLimit),this.Da=new eb,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function eV(t){if(e$(t),3==t.G){var e=t.U++,n=t9(t.I);if(er(n,"SID",t.K),er(n,"RID",e),er(n,"TYPE","terminate"),eG(t,n),(e=new tB(t,t.j,e)).L=2,e.v=ei(t9(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(e.v.toString(),"")}catch(t){}!n&&o.Image&&((new Image).src=e.v,n=!0),n||(e.g=e6(e.j,null),e.g.ea(e.v)),e.F=Date.now(),tq(e)}e1(t)}function ej(t){t.g&&(eX(t),t.g.cancel(),t.g=null)}function e$(t){ej(t),t.u&&(o.clearTimeout(t.u),t.u=null),eY(t),t.h.cancel(),t.s&&("number"==typeof t.s&&o.clearTimeout(t.s),t.s=null)}function ez(t){if(!tJ(t.h)&&!t.s){t.s=!0;var e=t.Ga;L||B(),P||(L(),P=!0),M.add(e,t),t.B=0}}function eq(t,e){var n;n=e?e.l:t.U++;let r=t9(t.I);er(r,"SID",t.K),er(r,"RID",n),er(r,"AID",t.T),eG(t,r),t.m&&t.o&&eS(r,t.m,t.o),n=new tB(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=eH(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),t6(t.h,n),tj(n,r,e)}function eG(t,e){t.H&&C(t.H,function(t,n){er(e,n,t)}),t.l&&t8({},function(t,n){er(e,n,t)})}function eH(t,e,n){n=Math.min(t.i.length,n);var r=t.l?w(t.l.Na,t.l,t):null;t:{var i=t.i;let e=-1;for(;;){let t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].g,a=i[o].map;if(0>(n-=e))e=Math.max(0,i[o].g-100),s=!1;else try{!function(t,e,n){let r=n||"";try{t8(t,function(t,n){let i=t;l(t)&&(i=tp(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,r}function eK(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;L||B(),P||(L(),P=!0),M.add(e,t),t.v=0}}function eQ(t){return!t.g&&!t.u&&!(3<=t.v)&&(t.Y++,t.u=tk(w(t.Fa,t),eZ(t,t.v)),t.v++,!0)}function eX(t){null!=t.A&&(o.clearTimeout(t.A),t.A=null)}function eW(t){t.g=new tB(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=t9(t.qa);er(e,"RID","rpc"),er(e,"SID",t.K),er(e,"AID",t.T),er(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&er(e,"TO",t.ja),er(e,"TYPE","xmlhttp"),eG(t,e),t.m&&t.o&&eS(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=ei(t9(e)),n.m=null,n.P=!0,t$(n,t)}function eY(t){null!=t.C&&(o.clearTimeout(t.C),t.C=null)}function eJ(t,e){var n=null;if(t.g==e){eY(t),eX(t),t.g=null;var r=2}else{if(!t0(t.h,e))return;n=e.D,t5(t.h,e),r=1}if(0!=t.G){if(e.o){if(1==r){n=e.m?e.m.length:0,e=Date.now()-e.F;var i,s=t.B;ta(r=tA(),new tN(r,n)),ez(t)}else eK(t)}else if(3==(s=e.s)||0==s&&0<e.X||!(1==r&&(i=e,!(tZ(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=i.D.concat(t.i),!0):1!=t.G&&2!=t.G&&!(t.B>=(t.Va?0:t.Wa))&&(t.s=tk(w(t.Ga,t,i),eZ(t,t.B)),t.B++,!0)))||2==r&&eQ(t)))switch(n&&0<n.length&&((e=t.h).i=e.i.concat(n)),s){case 1:e0(t,5);break;case 4:e0(t,10);break;case 3:e0(t,6);break;default:e0(t,2)}}}function eZ(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function e0(t,e){if(t.j.info("Error code "+e),2==e){var n=w(t.fb,t),r=t.Xa;let e=!r;r=new t7(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||et(r,"https"),ei(r),e?function(t,e){let n=new tR;if(o.Image){let r=new Image;r.onload=b(ew,n,"TestLoadImage: loaded",!0,e,r),r.onerror=b(ew,n,"TestLoadImage: error",!1,e,r),r.onabort=b(ew,n,"TestLoadImage: abort",!1,e,r),r.ontimeout=b(ew,n,"TestLoadImage: timeout",!1,e,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(r.toString(),n):function(t,e){let n=new tR,r=new AbortController,i=setTimeout(()=>{r.abort(),ew(n,"TestPingServer: timeout",!1,e)},1e4);fetch(t,{signal:r.signal}).then(t=>{clearTimeout(i),t.ok?ew(n,"TestPingServer: ok",!0,e):ew(n,"TestPingServer: server error",!1,e)}).catch(()=>{clearTimeout(i),ew(n,"TestPingServer: error",!1,e)})}(r.toString(),n)}else tD(2);t.G=0,t.l&&t.l.sa(e),e1(t),e$(t)}function e1(t){if(t.G=0,t.ka=[],t.l){let e=t3(t.h);(0!=e.length||0!=t.i.length)&&(_(t.ka,e),_(t.ka,t.i),t.h.i.length=0,T(t.i),t.i.length=0),t.l.ra()}}function e2(t,e,n){var r=n instanceof t7?t9(n):new t7(n);if(""!=r.g)e&&(r.g=e+"."+r.g),ee(r,r.s);else{var i=o.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new t7(null);r&&et(s,r),e&&(s.g=e),i&&ee(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.ya,n&&e&&er(r,n,e),er(r,"VER",t.la),eG(t,r),r}function e6(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new eC(t.Ca&&!t.pa?new eE({eb:n}):t.pa)).Ha(t.J),e}function e5(){}function e3(){}function e8(t,e){to.call(this),this.g=new eF(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!I(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!I(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new e9(this)}function e4(t){tE.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(let n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function e7(){tT.call(this),this.status=1}function e9(t){this.g=t}(n=eC.prototype).Ha=function(t){this.J=t},n.ea=function(t,n,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);n=n?n.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():e.g(),this.v=this.o?tv(this.o):tv(e),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(n,String(t),!0),this.B=!1}catch(t){ek(this,t);return}if(t=r||"",r=new Map(this.headers),i){if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)r.set(s,i[s]);else if("function"==typeof i.keys&&"function"==typeof i.get)for(let t of i.keys())r.set(t,i.get(t));else throw Error("Unknown input type for opt_headers: "+String(i))}for(let[e,a]of(i=Array.from(r.keys()).find(t=>"content-type"==t.toLowerCase()),s=o.FormData&&t instanceof o.FormData,!(0<=Array.prototype.indexOf.call(eN,n,void 0))||i||s||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(e,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eP(this),this.u=!0,this.g.send(t),this.u=!1}catch(t){ek(this,t)}},n.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,ta(this,"complete"),ta(this,"abort"),eL(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eL(this,!0)),eC.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eO(this):this.bb())},n.bb=function(){eO(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<eM(this)?this.g.status:-1}catch(t){return -1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},n.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),tg(e)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=eF.prototype).la=8,n.G=1,n.connect=function(t,e,n,r){tD(0),this.W=t,this.H=e||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=e2(this,null,this.W),ez(this)},n.Ga=function(t){if(this.s){if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;let i=new tB(this,this.j,t),s=this.o;if(this.S&&(s?k(s=D(s),this.S):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){e:{var r=this.i[n];if("__data__"in r.map&&"string"==typeof(r=r.map.__data__)){r=r.length;break e}r=void 0}if(void 0===r)break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=eH(this,i,e),er(n=t9(this.I),"RID",t),er(n,"CVER",22),this.D&&er(n,"X-HTTP-Session-Id",this.D),eG(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(ex(s)))+"&"+e:this.m&&eS(n,this.m,s)),t6(this.h,i),this.Ua&&er(n,"TYPE","init"),this.P?(er(n,"$req",e),er(n,"SID","null"),i.T=!0,tj(i,n,null)):tj(i,n,e),this.G=2}}else 3==this.G&&(t?eq(this,t):0==this.i.length||tJ(this.h)||eq(this))}},n.Fa=function(){if(this.u=null,eW(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=tk(w(this.ab,this),t)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tD(10),ej(this),eW(this))},n.Za=function(){null!=this.C&&(this.C=null,ej(this),eQ(this),tD(19))},n.fb=function(t){t?(this.j.info("Successfully pinged google.com"),tD(2)):(this.j.info("Failed to ping google.com"),tD(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=e5.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},e3.prototype.g=function(t,e){return new e8(t,e)},E(e8,to),e8.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},e8.prototype.close=function(){eV(this.g)},e8.prototype.o=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=tp(t),t=n);e.i.push(new tW(e.Ya++,t)),3==e.G&&ez(e)},e8.prototype.N=function(){this.g.l=null,delete this.j,eV(this.g),delete this.g,e8.aa.N.call(this)},E(e4,tE),E(e7,tT),E(e9,e5),e9.prototype.ua=function(){ta(this.g,"a")},e9.prototype.ta=function(t){ta(this.g,new e4(t))},e9.prototype.sa=function(t){ta(this.g,new e7)},e9.prototype.ra=function(){ta(this.g,"b")},e3.prototype.createWebChannel=e3.prototype.g,e8.prototype.send=e8.prototype.o,e8.prototype.open=e8.prototype.m,e8.prototype.close=e8.prototype.close,m=t2.createWebChannelTransport=function(){return new e3},g=t2.getStatEventTarget=function(){return tA()},p=t2.Event=t_,d=t2.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tL.NO_ERROR=0,tL.TIMEOUT=8,tL.HTTP_ERROR=6,c=t2.ErrorCode=tL,tP.COMPLETE="complete",f=t2.EventType=tP,tw.EventType=tb,tb.OPEN="a",tb.CLOSE="b",tb.ERROR="c",tb.MESSAGE="d",to.prototype.listen=to.prototype.K,u=t2.WebChannel=tw,t2.FetchXmlHttpFactory=eE,eC.prototype.listenOnce=eC.prototype.L,eC.prototype.getLastError=eC.prototype.Ka,eC.prototype.getLastErrorCode=eC.prototype.Ba,eC.prototype.getStatus=eC.prototype.Z,eC.prototype.getResponseJson=eC.prototype.Oa,eC.prototype.getResponseText=eC.prototype.oa,eC.prototype.send=eC.prototype.ea,eC.prototype.setWithCredentials=eC.prototype.Ha,h=t2.XhrIo=eC}).apply(void 0!==t1?t1:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),y=function(t){var e,n,r=function(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}(t),i=r[0],s=r[1],o=new t3((i+s)*3/4-s),a=0,l=s>0?i-4:i;for(n=0;n<l;n+=4)e=t5[t.charCodeAt(n)]<<18|t5[t.charCodeAt(n+1)]<<12|t5[t.charCodeAt(n+2)]<<6|t5[t.charCodeAt(n+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return 2===s&&(e=t5[t.charCodeAt(n)]<<2|t5[t.charCodeAt(n+1)]>>4,o[a++]=255&e),1===s&&(e=t5[t.charCodeAt(n)]<<10|t5[t.charCodeAt(n+1)]<<4|t5[t.charCodeAt(n+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o},v=function(t){for(var e,n=t.length,r=n%3,i=[],s=0,o=n-r;s<o;s+=16383)i.push(function(t,e,n){for(var r,i=[],s=e;s<n;s+=3)i.push(t6[(r=(t[s]<<16&0xff0000)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+t6[r>>12&63]+t6[r>>6&63]+t6[63&r]);return i.join("")}(t,s,s+16383>o?o:s+16383));return 1===r?i.push(t6[(e=t[n-1])>>2]+t6[e<<4&63]+"=="):2===r&&i.push(t6[(e=(t[n-2]<<8)+t[n-1])>>10]+t6[e>>4&63]+t6[e<<2&63]+"="),i.join("")};for(var t6=[],t5=[],t3="undefined"!=typeof Uint8Array?Uint8Array:Array,t8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t4=0,t7=t8.length;t4<t7;++t4)t6[t4]=t8[t4],t5[t8.charCodeAt(t4)]=t4;t5["-".charCodeAt(0)]=62,t5["_".charCodeAt(0)]=63,w=function(t,e,n,r,i){var s,o,a=8*i-r-1,l=(1<<a)-1,h=l>>1,u=-7,f=n?i-1:0,c=n?-1:1,d=t[e+f];for(f+=c,s=d&(1<<-u)-1,d>>=-u,u+=a;u>0;s=256*s+t[e+f],f+=c,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+f],f+=c,u-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=h}return(d?-1:1)*o*Math.pow(2,s-r)},b=function(t,e,n,r,i,s){var o,a,l,h=8*s-i-1,u=(1<<h)-1,f=u>>1,c=23===i?5960464477539062e-23:0,d=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=c/l:e+=c*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*l-1)*Math.pow(2,i),o+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;t[n+d]=255&o,d+=p,o/=256,h-=8);t[n+d-p]|=128*g};const t9="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function et(t){if(t>0x7fffffff)throw RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,ee.prototype),e}function ee(t,e,n){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return ei(t)}return en(t,e,n)}function en(t,e,n){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!ee.isEncoding(e))throw TypeError("Unknown encoding: "+e);let n=0|el(t,e),r=et(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(ek(t,Uint8Array)){let e=new Uint8Array(t);return eo(e.buffer,e.byteOffset,e.byteLength)}return es(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ek(t,ArrayBuffer)||t&&ek(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ek(t,SharedArrayBuffer)||t&&ek(t.buffer,SharedArrayBuffer)))return eo(t,e,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return ee.from(r,e,n);let i=function(t){var e;if(ee.isBuffer(t)){let e=0|ea(t.length),n=et(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?et(0):es(t):"Buffer"===t.type&&Array.isArray(t.data)?es(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return ee.from(t[Symbol.toPrimitive]("string"),e,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function er(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function ei(t){return er(t),et(t<0?0:0|ea(t))}function es(t){let e=t.length<0?0:0|ea(t.length),n=et(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function eo(t,e,n){let r;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),ee.prototype),r}function ea(t){if(t>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function el(t,e){if(ee.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ek(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return eC(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return eD(t).length;default:if(i)return r?-1:eC(t).length;e=(""+e).toLowerCase(),i=!0}}function eh(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,n){let r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=eR[t[r]];return i}(this,e,n);case"utf8":case"utf-8":return ed(this,e,n);case"ascii":return function(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":var i,s;return i=e,s=n,0===i&&s===this.length?v(this):v(this.slice(i,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){let r=t.slice(e,n),i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}(this,e,n);default:if(r)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function eu(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function ef(t,e,n,r,i){var s;if(0===t.length)return -1;if("string"==typeof n?(r=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(s=n=+n)!=s&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return -1;n=t.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof e&&(e=ee.from(e,r)),ee.isBuffer(e))return 0===e.length?-1:ec(t,e,n,r,i);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):ec(t,[e],n,r,i);throw TypeError("val must be string, number or Buffer")}function ec(t,e,n,r,i){let s,o=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;o=2,a/=2,l/=2,n/=2}function h(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let r=-1;for(s=n;s<a;s++)if(h(t,s)===h(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===l)return r*o}else -1!==r&&(s-=s-r),r=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){let n=!0;for(let r=0;r<l;r++)if(h(t,s+r)!==h(e,r)){n=!1;break}if(n)return s}return -1}function ed(t,e,n){n=Math.min(t.length,n);let r=[],i=e;for(;i<n;){let e=t[i],s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=n){let n,r,a,l;switch(o){case 1:e<128&&(s=e);break;case 2:(192&(n=t[i+1]))==128&&(l=(31&e)<<6|63&n)>127&&(s=l);break;case 3:n=t[i+1],r=t[i+2],(192&n)==128&&(192&r)==128&&(l=(15&e)<<12|(63&n)<<6|63&r)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],(192&n)==128&&(192&r)==128&&(192&a)==128&&(l=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return function(t){let e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function ep(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function eg(t,e,n,r,i,s){if(!ee.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw RangeError('"value" argument is out of bounds');if(n+r>t.length)throw RangeError("Index out of range")}function em(t,e,n,r,i){eI(e,r,i,t,n,7);let s=Number(e&BigInt(0xffffffff));t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s;let o=Number(e>>BigInt(32)&BigInt(0xffffffff));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function ey(t,e,n,r,i){eI(e,r,i,t,n,7);let s=Number(e&BigInt(0xffffffff));t[n+7]=s,s>>=8,t[n+6]=s,s>>=8,t[n+5]=s,s>>=8,t[n+4]=s;let o=Number(e>>BigInt(32)&BigInt(0xffffffff));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function ev(t,e,n,r,i,s){if(n+r>t.length||n<0)throw RangeError("Index out of range")}function ew(t,e,n,r,i){return e=+e,n>>>=0,i||ev(t,e,n,4,34028234663852886e22,-34028234663852886e22),b(t,e,n,r,23,4),n+4}function eb(t,e,n,r,i){return e=+e,n>>>=0,i||ev(t,e,n,8,17976931348623157e292,-17976931348623157e292),b(t,e,n,r,52,8),n+8}ee.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),ee.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(ee.prototype,"parent",{enumerable:!0,get:function(){if(ee.isBuffer(this))return this.buffer}}),Object.defineProperty(ee.prototype,"offset",{enumerable:!0,get:function(){if(ee.isBuffer(this))return this.byteOffset}}),ee.poolSize=8192,ee.from=function(t,e,n){return en(t,e,n)},Object.setPrototypeOf(ee.prototype,Uint8Array.prototype),Object.setPrototypeOf(ee,Uint8Array),ee.alloc=function(t,e,n){return(er(t),t<=0)?et(t):void 0!==e?"string"==typeof n?et(t).fill(e,n):et(t).fill(e):et(t)},ee.allocUnsafe=function(t){return ei(t)},ee.allocUnsafeSlow=function(t){return ei(t)},ee.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==ee.prototype},ee.compare=function(t,e){if(ek(t,Uint8Array)&&(t=ee.from(t,t.offset,t.byteLength)),ek(e,Uint8Array)&&(e=ee.from(e,e.offset,e.byteLength)),!ee.isBuffer(t)||!ee.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},ee.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ee.concat=function(t,e){let n;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ee.alloc(0);if(void 0===e)for(n=0,e=0;n<t.length;++n)e+=t[n].length;let r=ee.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){let e=t[n];if(ek(e,Uint8Array))i+e.length>r.length?(ee.isBuffer(e)||(e=ee.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else if(ee.isBuffer(e))e.copy(r,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=e.length}return r},ee.byteLength=el,ee.prototype._isBuffer=!0,ee.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)eu(this,e,e+1);return this},ee.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)eu(this,e,e+3),eu(this,e+1,e+2);return this},ee.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)eu(this,e,e+7),eu(this,e+1,e+6),eu(this,e+2,e+5),eu(this,e+3,e+4);return this},ee.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?ed(this,0,t):eh.apply(this,arguments)},ee.prototype.toLocaleString=ee.prototype.toString,ee.prototype.equals=function(t){if(!ee.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===ee.compare(this,t)},ee.prototype.inspect=function(){let t="";return t=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(t+=" ... "),"<Buffer "+t+">"},t9&&(ee.prototype[t9]=ee.prototype.inspect),ee.prototype.compare=function(t,e,n,r,i){if(ek(t,Uint8Array)&&(t=ee.from(t,t.offset,t.byteLength)),!ee.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return -1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;let s=i-r,o=n-e,a=Math.min(s,o),l=this.slice(r,i),h=t.slice(e,n);for(let t=0;t<a;++t)if(l[t]!==h[t]){s=l[t],o=h[t];break}return s<o?-1:o<s?1:0},ee.prototype.includes=function(t,e,n){return -1!==this.indexOf(t,e,n)},ee.prototype.indexOf=function(t,e,n){return ef(this,t,e,n,!0)},ee.prototype.lastIndexOf=function(t,e,n){return ef(this,t,e,n,!1)},ee.prototype.write=function(t,e,n,r){var i,s,o,a,l,h,u,f;if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let c=this.length-e;if((void 0===n||n>c)&&(n=c),t.length>0&&(n<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let d=!1;for(;;)switch(r){case"hex":return function(t,e,n,r){let i;n=Number(n)||0;let s=t.length-n;r?(r=Number(r))>s&&(r=s):r=s;let o=e.length;for(r>o/2&&(r=o/2),i=0;i<r;++i){let r=parseInt(e.substr(2*i,2),16);if(r!=r)break;t[n+i]=r}return i}(this,t,e,n);case"utf8":case"utf-8":return i=e,s=n,eN(eC(t,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return o=e,a=n,eN(function(t){let e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(t),this,o,a);case"base64":return l=e,h=n,eN(eD(t),this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=e,f=n,eN(function(t,e){let n,r;let i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i.push(n%256),i.push(r);return i}(t,this.length-u),this,u,f);default:if(d)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},ee.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ee.prototype.slice=function(t,e){let n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,ee.prototype),r},ee.prototype.readUintLE=ee.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||ep(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return r},ee.prototype.readUintBE=ee.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||ep(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},ee.prototype.readUint8=ee.prototype.readUInt8=function(t,e){return t>>>=0,e||ep(t,1,this.length),this[t]},ee.prototype.readUint16LE=ee.prototype.readUInt16LE=function(t,e){return t>>>=0,e||ep(t,2,this.length),this[t]|this[t+1]<<8},ee.prototype.readUint16BE=ee.prototype.readUInt16BE=function(t,e){return t>>>=0,e||ep(t,2,this.length),this[t]<<8|this[t+1]},ee.prototype.readUint32LE=ee.prototype.readUInt32LE=function(t,e){return t>>>=0,e||ep(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+0x1000000*this[t+3]},ee.prototype.readUint32BE=ee.prototype.readUInt32BE=function(t,e){return t>>>=0,e||ep(t,4,this.length),0x1000000*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ee.prototype.readBigUInt64LE=eO(function(t){eA(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&ex(t,this.length-8);let r=e+256*this[++t]+65536*this[++t]+0x1000000*this[++t],i=this[++t]+256*this[++t]+65536*this[++t]+0x1000000*n;return BigInt(r)+(BigInt(i)<<BigInt(32))}),ee.prototype.readBigUInt64BE=eO(function(t){eA(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&ex(t,this.length-8);let r=0x1000000*e+65536*this[++t]+256*this[++t]+this[++t],i=0x1000000*this[++t]+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),ee.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||ep(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},ee.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||ep(t,e,this.length);let r=e,i=1,s=this[t+--r];for(;r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},ee.prototype.readInt8=function(t,e){return(t>>>=0,e||ep(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},ee.prototype.readInt16LE=function(t,e){t>>>=0,e||ep(t,2,this.length);let n=this[t]|this[t+1]<<8;return 32768&n?0xffff0000|n:n},ee.prototype.readInt16BE=function(t,e){t>>>=0,e||ep(t,2,this.length);let n=this[t+1]|this[t]<<8;return 32768&n?0xffff0000|n:n},ee.prototype.readInt32LE=function(t,e){return t>>>=0,e||ep(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ee.prototype.readInt32BE=function(t,e){return t>>>=0,e||ep(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ee.prototype.readBigInt64LE=eO(function(t){eA(t>>>=0,"offset");let e=this[t],n=this[t+7];return(void 0===e||void 0===n)&&ex(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+0x1000000*this[++t])}),ee.prototype.readBigInt64BE=eO(function(t){eA(t>>>=0,"offset");let e=this[t],n=this[t+7];return(void 0===e||void 0===n)&&ex(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(0x1000000*this[++t]+65536*this[++t]+256*this[++t]+n)}),ee.prototype.readFloatLE=function(t,e){return t>>>=0,e||ep(t,4,this.length),w(this,t,!0,23,4)},ee.prototype.readFloatBE=function(t,e){return t>>>=0,e||ep(t,4,this.length),w(this,t,!1,23,4)},ee.prototype.readDoubleLE=function(t,e){return t>>>=0,e||ep(t,8,this.length),w(this,t,!0,52,8)},ee.prototype.readDoubleBE=function(t,e){return t>>>=0,e||ep(t,8,this.length),w(this,t,!1,52,8)},ee.prototype.writeUintLE=ee.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;eg(this,t,e,n,r,0)}let i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},ee.prototype.writeUintBE=ee.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;eg(this,t,e,n,r,0)}let i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},ee.prototype.writeUint8=ee.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,1,255,0),this[e]=255&t,e+1},ee.prototype.writeUint16LE=ee.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},ee.prototype.writeUint16BE=ee.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},ee.prototype.writeUint32LE=ee.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,4,0xffffffff,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},ee.prototype.writeUint32BE=ee.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,4,0xffffffff,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},ee.prototype.writeBigUInt64LE=eO(function(t,e=0){return em(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),ee.prototype.writeBigUInt64BE=eO(function(t,e=0){return ey(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),ee.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*n-1);eg(this,t,e,n,r-1,-r)}let i=0,s=1,o=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},ee.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*n-1);eg(this,t,e,n,r-1,-r)}let i=n-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},ee.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},ee.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},ee.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},ee.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,4,0x7fffffff,-0x80000000),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},ee.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||eg(this,t,e,4,0x7fffffff,-0x80000000),t<0&&(t=0xffffffff+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},ee.prototype.writeBigInt64LE=eO(function(t,e=0){return em(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),ee.prototype.writeBigInt64BE=eO(function(t,e=0){return ey(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),ee.prototype.writeFloatLE=function(t,e,n){return ew(this,t,e,!0,n)},ee.prototype.writeFloatBE=function(t,e,n){return ew(this,t,e,!1,n)},ee.prototype.writeDoubleLE=function(t,e,n){return eb(this,t,e,!0,n)},ee.prototype.writeDoubleBE=function(t,e,n){return eb(this,t,e,!1,n)},ee.prototype.copy=function(t,e,n,r){if(!ee.isBuffer(t))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);let i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},ee.prototype.fill=function(t,e,n,r){let i;if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!ee.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===t.length){let e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{let s=ee.isBuffer(t)?t:ee.from(t,r),o=s.length;if(0===o)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=s[i%o]}return this};const eE={};function eT(t,e,n){eE[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function e_(t){let e="",n=t.length,r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function eI(t,e,n,r,i,s){if(t>n||t<e){let r;let i="bigint"==typeof e?"n":"";throw r=s>3?0===e||e===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${e}${i} and <= ${n}${i}`,new eE.ERR_OUT_OF_RANGE("value",r,t)}eA(i,"offset"),(void 0===r[i]||void 0===r[i+s])&&ex(i,r.length-(s+1))}function eA(t,e){if("number"!=typeof t)throw new eE.ERR_INVALID_ARG_TYPE(e,"number",t)}function ex(t,e,n){if(Math.floor(t)!==t)throw eA(t,n),new eE.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new eE.ERR_BUFFER_OUT_OF_BOUNDS;throw new eE.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}eT("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),eT("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),eT("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>0x100000000?i=e_(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=e_(i)),i+="n"),r+=` It must be ${e}. Received ${i}`},RangeError);const eS=/[^+/0-9A-Za-z-_]/g;function eC(t,e){let n;e=e||1/0;let r=t.length,i=null,s=[];for(let o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319||o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return s}function eD(t){return y(function(t){if((t=(t=t.split("=")[0]).trim().replace(eS,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function eN(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length)&&!(i>=t.length);++i)e[i+n]=t[i];return i}function ek(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}const eR=function(){let t="0123456789abcdef",e=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function eO(t){return"undefined"==typeof BigInt?eL:t}function eL(){throw Error("BigInt not supported")}const eP="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}eM.UNAUTHENTICATED=new eM(null),eM.GOOGLE_CREDENTIALS=new eM("google-credentials-uid"),eM.FIRST_PARTY=new eM("first-party-uid"),eM.MOCK_USER=new eM("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eB="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU=new tp("@firebase/firestore");function eF(){return eU.logLevel}function eV(t,...e){if(eU.logLevel<=a.DEBUG){let n=e.map(ez);eU.debug(`Firestore (${eB}): ${t}`,...n)}}function ej(t,...e){if(eU.logLevel<=a.ERROR){let n=e.map(ez);eU.error(`Firestore (${eB}): ${t}`,...n)}}function e$(t,...e){if(eU.logLevel<=a.WARN){let n=e.map(ez);eU.warn(`Firestore (${eB}): ${t}`,...n)}}function ez(t){if("string"==typeof t)return t;try{/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return JSON.stringify(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eq(t="Unexpected state"){let e=`FIRESTORE (${eB}) INTERNAL ASSERTION FAILED: `+t;throw ej(e),Error(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class eH extends Z{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class eX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(eM.UNAUTHENTICATED))}shutdown(){}}class eW{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class eY{constructor(t){this.t=t,this.currentUser=eM.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){void 0===this.o||eq();let n=this.i,r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve(),i=new eK;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new eK,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let e=i;t.enqueueRetryable(async()=>{await e.promise,await r(this.currentUser)})},o=t=>{eV("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(t=>o(t)),setTimeout(()=>{if(!this.auth){let t=this.t.getImmediate({optional:!0});t?o(t):(eV("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new eK)}},0),s()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(eV("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?("string"==typeof e.accessToken||eq(),new eQ(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return null===t||"string"==typeof t||eq(),new eM(t)}}class eJ{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=eM.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eZ{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new eJ(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(eM.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e1{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){void 0===this.o||eq();let n=t=>{null!=t.error&&eV("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);let n=t.token!==this.R;return this.R=t.token,eV("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable(()=>n(e))};let r=t=>{eV("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(t=>r(t)),setTimeout(()=>{if(!this.appCheck){let t=this.A.getImmediate({optional:!0});t?r(t):eV("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?("string"==typeof t.token||eq(),this.R=t.token,new e0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";for(;n.length<20;){let r=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){let e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let t=0;t<40;t++)n[t]=Math.floor(256*Math.random());return n}(0);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function e6(t,e){return t<e?-1:t>e?1:0}function e5(t,e,n){return t.length===e.length&&t.every((t,r)=>n(t,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0||e>=1e9)throw new eH(eG.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-0xe7791f700||t>=0x3afff44180)throw new eH(eG.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e3.fromMillis(Date.now())}static fromDate(t){return e3.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new e3(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?e6(this.nanoseconds,t.nanoseconds):e6(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e8(t)}static min(){return new e8(new e3(0,0))}static max(){return new e8(new e3(0x3afff4417f,0x3b9ac9ff))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(t,e,n){void 0===e?e=0:e>t.length&&eq(),void 0===n?n=t.length-e:n>t.length-e&&eq(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===e4.comparator(this,t)}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof e4?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let n=t.get(r),i=e.get(r);if(n<i)return -1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class e7 extends e4{construct(t,e,n){return new e7(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let n of t){if(n.indexOf("//")>=0)throw new eH(eG.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(t=>t.length>0))}return new e7(e)}static emptyPath(){return new e7([])}}const e9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends e4{construct(t,e,n){return new nt(t,e,n)}static isValidIdentifier(t){return e9.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nt(["__name__"])}static fromServerFormat(t){let e=[],n="",r=0,i=()=>{if(0===n.length)throw new eH(eG.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""},s=!1;for(;r<t.length;){let e=t[r];if("\\"===e){if(r+1===t.length)throw new eH(eG.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new eH(eG.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?s=!s:"."!==e||s?n+=e:i(),r++}if(i(),s)throw new eH(eG.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new nt(e)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.path=t}static fromPath(t){return new ne(e7.fromString(t))}static fromName(t){return new ne(e7.fromString(t).popFirst(5))}static empty(){return new ne(e7.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===e7.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return e7.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ne(new e7(t.slice()))}}class nn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new nn(e8.min(),ne.empty(),-1)}static max(){return new nn(e8.max(),ne.empty(),-1)}}class nr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ni(t){if(t.code!==eG.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;eV("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&eq(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ns((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof ns?e:ns.resolve(e)}catch(t){return ns.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ns.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ns.reject(e)}static resolve(t){return new ns((e,n)=>{e(t)})}static reject(t){return new ns((e,n)=>{n(t)})}static waitFor(t){return new ns((e,n)=>{let r=0,i=0,s=!1;t.forEach(t=>{++r,t.next(()=>{++i,s&&i===r&&e()},t=>n(t))}),s=!0,i===r&&e()})}static or(t){let e=ns.resolve(!1);for(let n of t)e=e.next(t=>t?ns.resolve(t):n());return e}static forEach(t,e){let n=[];return t.forEach((t,r)=>{n.push(e.call(this,t,r))}),this.waitFor(n)}static mapArray(t,e){return new ns((n,r)=>{let i=t.length,s=Array(i),o=0;for(let a=0;a<i;a++){let l=a;e(t[l]).next(t=>{s[l]=t,++o===i&&n(s)},t=>r(t))}})}static doWhile(t,e){return new ns((n,r)=>{let i=()=>{!0===t()?e().next(()=>{i()},r):n()};i()})}}function no(t){return"IndexedDbTransactionError"===t.name}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ie(t),this.se=t=>e.writeSequenceNumber(t))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}function nl(t){return 0===t&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nu(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nf(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}na.oe=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t,e){this.comparator=t,this.root=e||np.EMPTY}insert(t,e){return new nc(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,np.BLACK,null,null))}remove(t){return new nc(this.comparator,this.root.remove(t,this.comparator).copy(null,null,np.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){let t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nd(this.root,t,this.comparator,!1)}getReverseIterator(){return new nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nd(this.root,t,this.comparator,!0)}}class nd{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class np{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:np.RED,this.left=null!=r?r:np.EMPTY,this.right=null!=i?i:np.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new np(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()}removeMin(){if(this.left.isEmpty())return np.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}remove(t,e){let n,r=this;if(0>e(t,r.key))r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return np.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t}rotateLeft(){let t=this.copy(null,null,np.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,np.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw eq();let t=this.left.check();if(t!==this.right.check())throw eq();return t+(this.isRed()?0:1)}}np.EMPTY=null,np.RED=!0,np.BLACK=!1,np.EMPTY=new class{constructor(){this.size=0}get key(){throw eq()}get value(){throw eq()}get color(){throw eq()}get left(){throw eq()}get right(){throw eq()}copy(t,e,n,r,i){return this}insert(t,e,n){return new np(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(t){this.comparator=t,this.data=new nc(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new nm(this.data.getIterator())}getIteratorFrom(t){return new nm(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof ng)||this.size!==t.size)return!1;let e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){let t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new ng(this.comparator);return e.data=t,e}}class nm{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t){this.fields=t,t.sort(nt.comparator)}static empty(){return new ny([])}unionWith(t){let e=new ng(nt.comparator);for(let t of this.fields)e=e.add(t);for(let n of t)e=e.add(n);return new ny(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return e5(this.fields,t.fields,(t,e)=>t.isEqual(e))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(t){this.binaryString=t}static fromBase64String(t){return new nw(function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new nv("Invalid base64 string: "+t):t}}(t))}static fromUint8Array(t){return new nw(function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){let e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return e6(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nw.EMPTY_BYTE_STRING=new nw("");const nb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nE(t){if(t||eq(),"string"==typeof t){let e=0,n=nb.exec(t);if(n||eq(),n[1]){let t=n[1];e=Number(t=(t+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(t).getTime()/1e3),nanos:e}}return{seconds:nT(t.seconds),nanos:nT(t.nanos)}}function nT(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function n_(t){return"string"==typeof t?nw.fromBase64String(t):nw.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nA(t){let e=nE(t.mapValue.fields.__local_write_time__.timestampValue);return new e3(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(t,e,n,r,i,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class nS{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new nS("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof nS&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nD(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nI(t)?4:nj(t)?0x1fffffffffffff:nF(t)?10:11:eq()}function nN(t,e){if(t===e)return!0;let n=nD(t);if(n!==nD(e))return!1;switch(n){case 0:case 0x1fffffffffffff:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nA(t).isEqual(nA(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;let n=nE(t.timestampValue),r=nE(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n_(t.bytesValue).isEqual(n_(e.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return nT(t.geoPointValue.latitude)===nT(e.geoPointValue.latitude)&&nT(t.geoPointValue.longitude)===nT(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return nT(t.integerValue)===nT(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){let n=nT(t.doubleValue),r=nT(e.doubleValue);return n===r?nl(n)===nl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return e5(t.arrayValue.values||[],e.arrayValue.values||[],nN);case 10:case 11:return function(t,e){let n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(nh(n)!==nh(r))return!1;for(let t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!nN(n[t],r[t])))return!1;return!0}(t,e);default:return eq()}}function nk(t,e){return void 0!==(t.values||[]).find(t=>nN(t,e))}function nR(t,e){if(t===e)return 0;let n=nD(t),r=nD(e);if(n!==r)return e6(n,r);switch(n){case 0:case 0x1fffffffffffff:return 0;case 1:return e6(t.booleanValue,e.booleanValue);case 2:return function(t,e){let n=nT(t.integerValue||t.doubleValue),r=nT(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return nO(t.timestampValue,e.timestampValue);case 4:return nO(nA(t),nA(e));case 5:return e6(t.stringValue,e.stringValue);case 6:return function(t,e){let n=n_(t),r=n_(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){let n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){let e=e6(n[t],r[t]);if(0!==e)return e}return e6(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){let n=e6(nT(t.latitude),nT(e.latitude));return 0!==n?n:e6(nT(t.longitude),nT(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nL(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,r,i,s;let o=t.fields||{},a=e.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,h=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=e6((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==h?void 0:h.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:nL(l,h)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===nC.mapValue&&e===nC.mapValue)return 0;if(t===nC.mapValue)return 1;if(e===nC.mapValue)return -1;let n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){let e=e6(r[t],s[t]);if(0!==e)return e;let o=nR(n[r[t]],i[s[t]]);if(0!==o)return o}return e6(r.length,s.length)}(t.mapValue,e.mapValue);default:throw eq()}}function nO(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return e6(t,e);let n=nE(t),r=nE(e),i=e6(n.seconds,r.seconds);return 0!==i?i:e6(n.nanos,r.nanos)}function nL(t,e){let n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){let e=nR(n[t],r[t]);if(e)return e}return e6(n.length,r.length)}function nP(t){var e,n;return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){let e=nE(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?n_(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,ne.fromName(e).toString()):"geoPointValue"in t?(n=t.geoPointValue,`geo(${n.latitude},${n.longitude})`):"arrayValue"in t?function(t){let e="[",n=!0;for(let r of t.values||[])n?n=!1:e+=",",e+=nP(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){let e=Object.keys(t.fields||{}).sort(),n="{",r=!0;for(let i of e)r?r=!1:n+=",",n+=`${i}:${nP(t.fields[i])}`;return n+"}"}(t.mapValue):eq()}function nM(t){return!!t&&"integerValue"in t}function nB(t){return!!t&&"arrayValue"in t}function nU(t){return!!t&&"mapValue"in t}function nF(t){var e,n;return"__vector__"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nV(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return nu(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=nV(n)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nV(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nj(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(t){this.value=t}static empty(){return new n$({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(!nU(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=nV(e)}setAll(t){let e=nt.emptyPath(),n={},r=[];t.forEach((t,i)=>{if(!e.isImmediateParentOf(i)){let t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=nV(t):r.push(i.lastSegment())});let i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){let e=this.field(t.popLast());nU(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return nN(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];nU(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){for(let r of(nu(e,(e,n)=>t[e]=n),n))delete t[r]}clone(){return new n$(nV(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new nz(t,0,e8.min(),e8.min(),e8.min(),n$.empty(),0)}static newFoundDocument(t,e,n,r){return new nz(t,1,e,e8.min(),n,r,0)}static newNoDocument(t,e){return new nz(t,2,e,e8.min(),e8.min(),n$.empty(),0)}static newUnknownDocument(t,e){return new nz(t,3,e,e8.min(),e8.min(),n$.empty(),2)}convertToFoundDocument(t,e){return this.createTime.isEqual(e8.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=n$.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=n$.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=e8.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof nz&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new nz(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(t,e){this.position=t,this.inclusive=e}}function nG(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ne.comparator(ne.fromName(o.referenceValue),n.key):nR(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function nH(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nN(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{constructor(t,e="asc"){this.field=t,this.dir=e}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nQ{}class nX extends nQ{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new nZ(t,e,n):"array-contains"===e?new n6(t,n):"in"===e?new n5(t,n):"not-in"===e?new n3(t,n):"array-contains-any"===e?new n8(t,n):new nX(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new n0(t,n):new n1(t,n)}matches(t){let e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(nR(e,this.value)):null!==e&&nD(this.value)===nD(e)&&this.matchesComparison(nR(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return eq()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nW extends nQ{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new nW(t,e)}matches(t){return nY(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nY(t){return"and"===t.op}function nJ(t){for(let e of t.filters)if(e instanceof nW)return!1;return!0}class nZ extends nX{constructor(t,e,n){super(t,e,n),this.key=ne.fromName(n.referenceValue)}matches(t){let e=ne.comparator(t.key,this.key);return this.matchesComparison(e)}}class n0 extends nX{constructor(t,e){super(t,"in",e),this.keys=n2("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class n1 extends nX{constructor(t,e){super(t,"not-in",e),this.keys=n2("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function n2(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>ne.fromName(t.referenceValue))}class n6 extends nX{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return nB(e)&&nk(e.arrayValue,this.value)}}class n5 extends nX{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return null!==e&&nk(this.value.arrayValue,e)}}class n3 extends nX{constructor(t,e){super(t,"not-in",e)}matches(t){if(nk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return null!==e&&!nk(this.value.arrayValue,e)}}class n8 extends nX{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!nB(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>nk(this.value.arrayValue,t))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function n7(t,e=null,n=[],r=[],i=null,s=null,o=null){return new n4(t,e,n,r,i,s,o)}function n9(t){if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:"+t.filters.map(t=>(function t(e){if(e instanceof nX)return e.field.canonicalString()+e.op.toString()+nP(e.value);if(nJ(e)&&nY(e))return e.filters.map(e=>t(e)).join(",");{let n=e.filters.map(e=>t(e)).join(",");return`${e.op}(${n})`}})(t)).join(",")+"|ob:"+t.orderBy.map(t=>t.field.canonicalString()+t.dir).join(","),null==t.limit||(e+="|l:"+t.limit),t.startAt&&(e+="|lb:"+(t.startAt.inclusive?"b:":"a:")+t.startAt.position.map(t=>nP(t)).join(",")),t.endAt&&(e+="|ub:"+(t.endAt.inclusive?"a:":"b:")+t.endAt.position.map(t=>nP(t)).join(",")),t.ue=e}return t.ue}function rt(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++){var n,r;if(n=t.orderBy[i],r=e.orderBy[i],!(n.dir===r.dir&&n.field.isEqual(r.field)))return!1}if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!function t(e,n){return e instanceof nX?n instanceof nX&&e.op===n.op&&e.field.isEqual(n.field)&&nN(e.value,n.value):e instanceof nW?n instanceof nW&&e.op===n.op&&e.filters.length===n.filters.length&&e.filters.reduce((e,r,i)=>e&&t(r,n.filters[i]),!0):void eq()}(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nH(t.startAt,e.startAt)&&nH(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rn(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function rr(t){if(null===t.ce){let e;t.ce=[];let n=new Set;for(let e of t.explicitOrderBy)t.ce.push(e),n.add(e.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(e=new ng(nt.comparator),t.filters.forEach(t=>{t.getFlattenedFilters().forEach(t=>{t.isInequality()&&(e=e.add(t.field))})}),e).forEach(e=>{n.has(e.canonicalString())||e.isKeyField()||t.ce.push(new nK(e,r))}),n.has(nt.keyField().canonicalString())||t.ce.push(new nK(nt.keyField(),r))}return t.ce}function ri(t){return t.le||(t.le=function(t,e){if("F"===t.limitType)return n7(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(t=>{let e="desc"===t.dir?"asc":"desc";return new nK(t.field,e)});let n=t.endAt?new nq(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nq(t.startAt.position,t.startAt.inclusive):null;return n7(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(t,rr(t))),t.le}function rs(t,e,n){return new re(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ro(t,e){return rt(ri(t),ri(e))&&t.limitType===e.limitType}function ra(t){return`${n9(ri(t))}|lt:${t.limitType}`}function rl(t){var e;let n;return`Query(target=${n=(e=ri(t)).path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(t=>(function t(e){return e instanceof nX?`${e.field.canonicalString()} ${e.op} ${nP(e.value)}`:e instanceof nW?e.op.toString()+" {"+e.getFilters().map(t).join(" ,")+"}":"Filter"})(t)).join(", ")}]`),null==e.limit||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(t=>`${t.field.canonicalString()} (${t.dir})`).join(", ")}]`),e.startAt&&(n+=", startAt: "+(e.startAt.inclusive?"b:":"a:")+e.startAt.position.map(t=>nP(t)).join(",")),e.endAt&&(n+=", endAt: "+(e.endAt.inclusive?"a:":"b:")+e.endAt.position.map(t=>nP(t)).join(",")),`Target(${n})`}; limitType=${t.limitType})`}function rh(t,e){return e.isFoundDocument()&&function(t,e){let n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ne.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(let n of rr(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(let n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&(!t.startAt||!!function(t,e,n){let r=nG(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,rr(t),e))&&(!t.endAt||!!function(t,e,n){let r=nG(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,rr(t),e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n){for(let[e,r]of n)if(this.equalsFn(e,t))return r}}has(t){return void 0!==this.get(t)}set(t,e){let n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){nu(this.inner,(e,n)=>{for(let[e,r]of n)t(e,r)})}isEmpty(){return nf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new nc(ne.comparator),rc=new nc(ne.comparator);function rd(...t){let e=rc;for(let n of t)e=e.insert(n.key,n);return e}function rp(t){let e=rc;return t.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function rg(){return new ru(t=>t.toString(),(t,e)=>t.isEqual(e))}const rm=new nc(ne.comparator),ry=new ng(ne.comparator);function rv(...t){let e=ry;for(let n of t)e=e.add(n);return e}const rw=new ng(e6);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nl(e)?"-0":e}}function rE(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this._=void 0}}function r_(t,e){return t instanceof rD?nM(e)||e&&"doubleValue"in e?e:{integerValue:0}:null}class rI extends rT{}class rA extends rT{constructor(t){super(),this.elements=t}}function rx(t,e){let n=rk(e);for(let e of t.elements)n.some(t=>nN(t,e))||n.push(e);return{arrayValue:{values:n}}}class rS extends rT{constructor(t){super(),this.elements=t}}function rC(t,e){let n=rk(e);for(let e of t.elements)n=n.filter(t=>!nN(t,e));return{arrayValue:{values:n}}}class rD extends rT{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function rN(t){return nT(t.integerValue||t.doubleValue)}function rk(t){return nB(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class rR{constructor(t,e){this.version=t,this.transformResults=e}}class rO{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new rO}static exists(t){return new rO(void 0,t)}static updateTime(t){return new rO(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rL(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class rP{}function rM(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new rq(t.key,rO.none()):new rF(t.key,t.data,rO.none());{let n=t.data,r=n$.empty(),i=new ng(nt.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new rV(t.key,r,new ny(i.toArray()),rO.none())}}function rB(t,e,n,r){return t instanceof rF?function(t,e,n,r){if(!rL(t.precondition,e))return n;let i=t.value.clone(),s=rz(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof rV?function(t,e,n,r){if(!rL(t.precondition,e))return n;let i=rz(t.fieldTransforms,r,e),s=e.data;return(s.setAll(rj(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n)?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map(t=>t.field))}(t,e,n,r):rL(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}function rU(t,e){var n,r;return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||!(!n||!r)&&e5(n,r,(t,e)=>{var n,r;return t.field.isEqual(e.field)&&(n=t.transform,r=e.transform,n instanceof rA&&r instanceof rA||n instanceof rS&&r instanceof rS?e5(n.elements,r.elements,nN):n instanceof rD&&r instanceof rD?nN(n.Pe,r.Pe):n instanceof rI&&r instanceof rI)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rF extends rP{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rV extends rP{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function rj(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function r$(t,e,n){var r;let i=new Map;t.length===n.length||eq();for(let s=0;s<n.length;s++){let o=t[s],a=o.transform,l=e.data.field(o.field);i.set(o.field,(r=n[s],a instanceof rA?rx(a,l):a instanceof rS?rC(a,l):r))}return i}function rz(t,e,n){let r=new Map;for(let i of t){let t=i.transform,s=n.data.field(i.field);r.set(i.field,t instanceof rI?function(t,e){let n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&nI(e)&&(e=function t(e){let n=e.mapValue.fields.__previous_value__;return nI(n)?t(n):n}(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(e,s):t instanceof rA?rx(t,s):t instanceof rS?rC(t,s):function(t,e){let n=r_(t,e),r=rN(n)+rN(t.Pe);return nM(n)&&nM(t.Pe)?rE(r):rb(t.serializer,r)}(t,s))}return r}class rq extends rP{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rG extends rP{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){let n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){let i=this.mutations[e];if(i.key.isEqual(t.key)){var r;r=n[e],i instanceof rF?function(t,e,n){let r=t.value.clone(),i=r$(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(i,t,r):i instanceof rV?function(t,e,n){if(!rL(t.precondition,e))return void e.convertToUnknownDocument(n.version);let r=r$(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(rj(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(i,t,r):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,r)}}}applyToLocalView(t,e){for(let n of this.baseMutations)n.key.isEqual(t.key)&&(e=rB(n,t,e,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(t.key)&&(e=rB(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let n=rg();return this.mutations.forEach(r=>{let i=t.get(r.key),s=i.overlayedDocument,o=this.applyToLocalView(s,i.mutatedFields),a=rM(s,o=e.has(r.key)?null:o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(e8.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),rv())}isEqual(t){return this.batchId===t.batchId&&e5(this.mutations,t.mutations,(t,e)=>rU(t,e))&&e5(this.baseMutations,t.baseMutations,(t,e)=>rU(t,e))}}class rK{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){t.mutations.length===n.length||eq();let r=rm,i=t.mutations;for(let t=0;t<i.length;t++)r=r.insert(i[t].key,n[t].version);return new rK(t,e,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rQ{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}(T=E||(E={}))[T.OK=0]="OK",T[T.CANCELLED=1]="CANCELLED",T[T.UNKNOWN=2]="UNKNOWN",T[T.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",T[T.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",T[T.NOT_FOUND=5]="NOT_FOUND",T[T.ALREADY_EXISTS=6]="ALREADY_EXISTS",T[T.PERMISSION_DENIED=7]="PERMISSION_DENIED",T[T.UNAUTHENTICATED=16]="UNAUTHENTICATED",T[T.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",T[T.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",T[T.ABORTED=10]="ABORTED",T[T.OUT_OF_RANGE=11]="OUT_OF_RANGE",T[T.UNIMPLEMENTED=12]="UNIMPLEMENTED",T[T.INTERNAL=13]="INTERNAL",T[T.UNAVAILABLE=14]="UNAVAILABLE",T[T.DATA_LOSS=15]="DATA_LOSS",new l([0xffffffff,0xffffffff],0);class rX{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function rW(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rY(t){return t||eq(),e8.fromTimestamp(function(t){let e=nE(t);return new e3(e.seconds,e.nanos)}(t))}function rJ(t,e){return rZ(t,e).canonicalString()}function rZ(t,e){let n=new e7(["projects",t.projectId,"databases",t.database]).child("documents");return void 0===e?n:n.child(e)}function r0(t,e){return rJ(t.databaseId,e.path)}function r1(t,e,n){return{name:r0(t,e),fields:n.value.mapValue.fields}}function r2(t){return nt.fromServerFormat(t.fieldPath)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(t){this.ct=t}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(nT(t.integerValue));else if("doubleValue"in t){let n=nT(t.doubleValue);isNaN(n)?this.dt(e,13):(this.dt(e,15),nl(n)?e.At(0):e.At(n))}else if("timestampValue"in t){let n=t.timestampValue;this.dt(e,20),"string"==typeof n&&(n=nE(n)),e.Rt(`${n.seconds||""}`),e.At(n.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(n_(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let n=t.geoPointValue;this.dt(e,45),e.At(n.latitude||0),e.At(n.longitude||0)}else"mapValue"in t?nj(t)?this.dt(e,Number.MAX_SAFE_INTEGER):nF(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):eq()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let n=t.fields||{};for(let t of(this.dt(e,55),Object.keys(n)))this.Vt(t,e),this.Tt(n[t],e)}wt(t,e){var n,r;let i=t.fields||{};this.dt(e,53);let s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(e,15),e.At(nT(o)),this.Vt(s,e),this.Tt(i[s],e)}bt(t,e){let n=t.values||[];for(let t of(this.dt(e,50),n))this.Tt(t,e)}yt(t,e){this.dt(e,37),ne.fromName(t).path.forEach(t=>{this.dt(e,60),this.Dt(t,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}}r5.vt=new r5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(){this.un=new r8}addToCollectionParentIndex(t,e){return this.un.add(e),ns.resolve()}getCollectionParents(t,e){return ns.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return ns.resolve()}deleteFieldIndex(t,e){return ns.resolve()}deleteAllFieldIndexes(t){return ns.resolve()}createTargetIndexes(t,e){return ns.resolve()}getDocumentsMatchingTarget(t,e){return ns.resolve(null)}getIndexType(t,e){return ns.resolve(0)}getFieldIndexes(t,e){return ns.resolve([])}getNextCollectionGroupToUpdate(t){return ns.resolve(null)}getMinOffset(t,e){return ns.resolve(nn.min())}getMinOffsetFromCollectionGroup(t,e){return ns.resolve(nn.min())}updateCollectionGroup(t,e,n){return ns.resolve()}updateIndexEntries(t,e){return ns.resolve()}}class r8{constructor(){this.index={}}add(t){let e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ng(e7.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){let e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new ng(e7.comparator)).toArray()}}new Uint8Array(0);class r4{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new r4(t,r4.DEFAULT_COLLECTION_PERCENTILE,r4.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r4.DEFAULT_COLLECTION_PERCENTILE=10,r4.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,r4.DEFAULT=new r4(0x2800000,r4.DEFAULT_COLLECTION_PERCENTILE,r4.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),r4.DISABLED=new r4(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new r7(0)}static kn(){return new r7(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(){this.changes=new ru(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,nz.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let n=this.changes.get(e);return void 0!==n?ns.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(t=>(null!==n&&rB(n.mutation,t,ny.empty(),e3.now()),t))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.getLocalViewOfDocuments(t,e,rv()).next(()=>e))}getLocalViewOfDocuments(t,e,n=rv()){let r=rg();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(t=>{let e=rd();return t.forEach((t,n)=>{e=e.insert(t,n.overlayedDocument)}),e}))}getOverlayedDocuments(t,e){let n=rg();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,rv()))}populateOverlays(t,e,n){let r=[];return n.forEach(t=>{e.has(t)||r.push(t)}),this.documentOverlayCache.getOverlays(t,r).next(t=>{t.forEach((t,n)=>{e.set(t,n)})})}computeViews(t,e,n,r){let i=rf,s=rg(),o=rg();return e.forEach((t,e)=>{let o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof rV)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),rB(o.mutation,e,o.mutation.getFieldMask(),e3.now())):s.set(e.key,ny.empty())}),this.recalculateAndSaveOverlays(t,i).next(t=>(t.forEach((t,e)=>s.set(t,e)),e.forEach((t,e)=>{var n;return o.set(t,new it(e,null!==(n=s.get(t))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(t,e){let n=rg(),r=new nc((t,e)=>t-e),i=rv();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>{for(let i of t)i.keys().forEach(t=>{let s=e.get(t);if(null===s)return;let o=n.get(t)||ny.empty();o=i.applyToLocalView(s,o),n.set(t,o);let a=(r.get(i.batchId)||rv()).add(t);r=r.insert(i.batchId,a)})}).next(()=>{let s=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),a=r.key,l=r.value,h=rg();l.forEach(t=>{if(!i.has(t)){let r=rM(e.get(t),n.get(t));null!==r&&h.set(t,r),i=i.add(t)}}),s.push(this.documentOverlayCache.saveOverlays(t,a,h))}return ns.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.recalculateAndSaveOverlays(t,e))}getDocumentsMatchingQuery(t,e,n,r){return ne.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):null!==e.collectionGroup?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(i=>{let s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):ns.resolve(rg()),o=-1,a=i;return s.next(e=>ns.forEach(e,(e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?ns.resolve():this.remoteDocumentCache.getEntry(t,e).next(t=>{a=a.insert(e,t)}))).next(()=>this.populateOverlays(t,e,i)).next(()=>this.computeViews(t,a,e,rv())).next(t=>({batchId:o,changes:rp(t)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ne(e)).next(t=>{let e=rd();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){let i=e.collectionGroup,s=rd();return this.indexManager.getCollectionParents(t,i).next(o=>ns.forEach(o,o=>{let a=new re(o.child(i),null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt);return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next(t=>{t.forEach((t,e)=>{s=s.insert(t,e)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r))).next(t=>{i.forEach((e,n)=>{let r=n.getKey();null===t.get(r)&&(t=t.insert(r,nz.newInvalidDocument(r)))});let n=rd();return t.forEach((t,r)=>{let s=i.get(t);void 0!==s&&rB(s.mutation,r,ny.empty(),e3.now()),rh(e,r)&&(n=n.insert(t,r))}),n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return ns.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,{id:e.id,version:e.version,createTime:rY(e.createTime)}),ns.resolve()}getNamedQuery(t,e){return ns.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,{name:e.name,query:function(t){let e=function(t){var e;let n,r=function(t){let e=function(t){let e=e7.fromString(t);return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)||eq(),e}(t);return 4===e.length?e7.emptyPath():(e.length>4&&"documents"===e.get(4)||eq(),e.popFirst(5))}(t.parent),i=t.structuredQuery,s=i.from?i.from.length:0,o=null;if(s>0){1===s||eq();let t=i.from[0];t.allDescendants?o=t.collectionId:r=r.child(t.collectionId)}let a=[];i.where&&(a=function(t){var e;let n=function t(e){return void 0!==e.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":let e=r2(t.unaryFilter.field);return nX.create(e,"==",{doubleValue:NaN});case"IS_NULL":let n=r2(t.unaryFilter.field);return nX.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=r2(t.unaryFilter.field);return nX.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=r2(t.unaryFilter.field);return nX.create(i,"!=",{nullValue:"NULL_VALUE"});default:return eq()}}(e):void 0!==e.fieldFilter?nX.create(r2(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return eq()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==e.compositeFilter?nW.create(e.compositeFilter.filters.map(e=>t(e)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return eq()}}(e.compositeFilter.op)):eq()}(t);return n instanceof nW&&nJ(e=n)&&nY(e)?n.getFilters():[n]}(i.where));let l=[];i.orderBy&&(l=i.orderBy.map(t=>new nK(r2(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))));let h=null;i.limit&&(h=null==(n="object"==typeof(e=i.limit)?e.value:e)?null:n);let u=null;i.startAt&&(u=function(t){let e=!!t.before;return new nq(t.values||[],e)}(i.startAt));let f=null;return i.endAt&&(f=function(t){let e=!t.before;return new nq(t.values||[],e)}(i.endAt)),new re(r,o,l,a,h,"F",u,f)}({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?rs(e,e.limit,"L"):e}(e.bundledQuery),readTime:rY(e.readTime)}),ns.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.overlays=new nc(ne.comparator),this.Ir=new Map}getOverlay(t,e){return ns.resolve(this.overlays.get(e))}getOverlays(t,e){let n=rg();return ns.forEach(e,e=>this.getOverlay(t,e).next(t=>{null!==t&&n.set(e,t)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((n,r)=>{this.ht(t,e,r)}),ns.resolve()}removeOverlaysForBatchId(t,e,n){let r=this.Ir.get(n);return void 0!==r&&(r.forEach(t=>this.overlays=this.overlays.remove(t)),this.Ir.delete(n)),ns.resolve()}getOverlaysForCollection(t,e,n){let r=rg(),i=e.length+1,s=new ne(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){let t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return ns.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new nc((t,e)=>t-e),s=this.overlays.getIterator();for(;s.hasNext();){let t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=rg(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}let o=rg(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((t,e)=>o.set(t,e)),!(o.size()>=r)););return ns.resolve(o)}ht(t,e,n){let r=this.overlays.get(n.key);if(null!==r){let t=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new rQ(e,n));let i=this.Ir.get(e);void 0===i&&(i=rv(),this.Ir.set(e,i)),this.Ir.set(e,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.sessionToken=nw.EMPTY_BYTE_STRING}getSessionToken(t){return ns.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,ns.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.Tr=new ng(ia.Er),this.dr=new ng(ia.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){let n=new ia(t,e);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.Vr(new ia(t,e))}mr(t,e){t.forEach(t=>this.removeReference(t,e))}gr(t){let e=new ne(new e7([])),n=new ia(e,t),r=new ia(e,t+1),i=[];return this.dr.forEachInRange([n,r],t=>{this.Vr(t),i.push(t.key)}),i}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){let e=new ne(new e7([])),n=new ia(e,t),r=new ia(e,t+1),i=rv();return this.dr.forEachInRange([n,r],t=>{i=i.add(t.key)}),i}containsKey(t){let e=new ia(t,0),n=this.Tr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class ia{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return ne.comparator(t.key,e.key)||e6(t.wr,e.wr)}static Ar(t,e){return e6(t.wr,e.wr)||ne.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new ng(ia.Er)}checkEmpty(t){return ns.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){let i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new rH(i,e,n,r);for(let e of(this.mutationQueue.push(s),r))this.br=this.br.add(new ia(e.key,i)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return ns.resolve(s)}lookupMutationBatch(t,e){return ns.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){let n=this.vr(e+1),r=n<0?0:n;return ns.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ns.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return ns.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let n=new ia(e,0),r=new ia(e,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],t=>{let e=this.Dr(t.wr);i.push(e)}),ns.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ng(e6);return e.forEach(t=>{let e=new ia(t,0),r=new ia(t,Number.POSITIVE_INFINITY);this.br.forEachInRange([e,r],t=>{n=n.add(t.wr)})}),ns.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){let n=e.path,r=n.length+1,i=n;ne.isDocumentKey(i)||(i=i.child(""));let s=new ia(new ne(i),0),o=new ng(e6);return this.br.forEachWhile(t=>{let e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.wr)),!0)},s),ns.resolve(this.Cr(o))}Cr(t){let e=[];return t.forEach(t=>{let n=this.Dr(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){0===this.Fr(e.batchId,"removed")||eq(),this.mutationQueue.shift();let n=this.br;return ns.forEach(e.mutations,r=>{let i=new ia(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=n})}On(t){}containsKey(t,e){let n=new ia(e,0),r=this.br.firstAfterOrEqual(n);return ns.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,ns.resolve()}Fr(t,e){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){let e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t){this.Mr=t,this.docs=new nc(ne.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let n=this.docs.get(e);return ns.resolve(n?n.document.mutableCopy():nz.newInvalidDocument(e))}getEntries(t,e){let n=rf;return e.forEach(t=>{let e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():nz.newInvalidDocument(t))}),ns.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=rf,s=e.path,o=new ne(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){let{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||0>=function(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:0!==(n=ne.comparator(t.documentKey,e.documentKey))?n:e6(t.largestBatchId,e.largestBatchId)}(new nn(o.readTime,o.key,-1),n)||(r.has(o.key)||rh(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ns.resolve(i)}getAllFromCollectionGroup(t,e,n,r){eq()}Or(t,e){return ns.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new iu(this)}getSize(t){return ns.resolve(this.size)}}class iu extends r9{constructor(t){super(),this.cr=t}applyChanges(t){let e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(n)}),ns.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t){this.persistence=t,this.Nr=new ru(t=>n9(t),rt),this.lastRemoteSnapshotVersion=e8.min(),this.highestTargetId=0,this.Lr=0,this.Br=new io,this.targetCount=0,this.kr=r7.Bn()}forEachTarget(t,e){return this.Nr.forEach((t,n)=>e(n)),ns.resolve()}getLastRemoteSnapshotVersion(t){return ns.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ns.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),ns.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Lr&&(this.Lr=e),ns.resolve()}Kn(t){this.Nr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.kr=new r7(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,ns.resolve()}updateTargetData(t,e){return this.Kn(e),ns.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,ns.resolve()}removeTargets(t,e,n){let r=0,i=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)}),ns.waitFor(i).next(()=>r)}getTargetCount(t){return ns.resolve(this.targetCount)}getTargetData(t,e){let n=this.Nr.get(e)||null;return ns.resolve(n)}addMatchingKeys(t,e,n){return this.Br.Rr(e,n),ns.resolve()}removeMatchingKeys(t,e,n){this.Br.mr(e,n);let r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(e=>{i.push(r.markPotentiallyOrphaned(t,e))}),ns.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),ns.resolve()}getMatchingKeysForTargetId(t,e){let n=this.Br.yr(e);return ns.resolve(n)}containsKey(t,e){return ns.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t,e){this.qr={},this.overlays={},this.Qr=new na(0),this.Kr=!1,this.Kr=!0,this.$r=new is,this.referenceDelegate=t(this),this.Ur=new ic(this),this.indexManager=new r3,this.remoteDocumentCache=new ih(t=>this.referenceDelegate.Wr(t)),this.serializer=new r6(e),this.Gr=new ir(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ii,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.qr[t.toKey()];return n||(n=new il(e,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,n){eV("MemoryPersistence","Starting transaction:",t);let r=new ip(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(t=>this.referenceDelegate.jr(r).next(()=>t)).toPromise().then(t=>(r.raiseOnCommittedEvent(),t))}Hr(t,e){return ns.or(Object.values(this.qr).map(n=>()=>n.containsKey(t,e)))}}class ip extends nr{constructor(t){super(),this.currentSequenceNumber=t}}class ig{constructor(t){this.persistence=t,this.Jr=new io,this.Yr=null}static Zr(t){return new ig(t)}get Xr(){if(this.Yr)return this.Yr;throw eq()}addReference(t,e,n){return this.Jr.addReference(n,e),this.Xr.delete(n.toString()),ns.resolve()}removeReference(t,e,n){return this.Jr.removeReference(n,e),this.Xr.add(n.toString()),ns.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),ns.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(t=>this.Xr.add(t.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.Xr.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ns.forEach(this.Xr,n=>{let r=ne.fromPath(n);return this.ei(t,r).next(t=>{t||e.removeEntry(r,e8.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(t=>{t?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return ns.or([()=>ns.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.$i=n,this.Ui=r}static Wi(t,e){let n=rv(),r=rv();for(let t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new im(t,e.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=!function(){var t;let e=null===(t=Q())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(A.process)}catch(t){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(t){let e=t.match(/Android ([\d.]+)/i);return Number(e?e[1].split(".").slice(0,2).join("."):"-1")}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,n,r){let i={result:null};return this.Yi(t,e).next(t=>{i.result=t}).next(()=>{if(!i.result)return this.Zi(t,e,r,n).next(t=>{i.result=t})}).next(()=>{if(i.result)return;let n=new iy;return this.Xi(t,e,n).next(r=>{if(i.result=r,this.zi)return this.es(t,e,n,r.size)})}).next(()=>i.result)}es(t,e,n,r){return n.documentReadCount<this.ji?(eF()<=a.DEBUG&&eV("QueryEngine","SDK will not create cache indexes for query:",rl(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ns.resolve()):(eF()<=a.DEBUG&&eV("QueryEngine","Query:",rl(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(eF()<=a.DEBUG&&eV("QueryEngine","The SDK decides to create cache indexes for query:",rl(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ri(e))):ns.resolve())}Yi(t,e){if(rn(e))return ns.resolve(null);let n=ri(e);return this.indexManager.getIndexType(t,n).next(r=>0===r?null:(null!==e.limit&&1===r&&(n=ri(e=rs(e,null,"F"))),this.indexManager.getDocumentsMatchingTarget(t,n).next(r=>{let i=rv(...r);return this.Ji.getDocuments(t,i).next(r=>this.indexManager.getMinOffset(t,n).next(n=>{let s=this.ts(e,r);return this.ns(e,s,i,n.readTime)?this.Yi(t,rs(e,null,"F")):this.rs(t,s,e,n)}))})))}Zi(t,e,n,r){return rn(e)||r.isEqual(e8.min())?ns.resolve(null):this.Ji.getDocuments(t,n).next(i=>{let s=this.ts(e,i);return this.ns(e,s,n,r)?ns.resolve(null):(eF()<=a.DEBUG&&eV("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rl(e)),this.rs(t,s,e,function(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1;return new nn(e8.fromTimestamp(1e9===r?new e3(n+1,0):new e3(n,r)),ne.empty(),-1)}(r,0)).next(t=>t))})}ts(t,e){let n=new ng((e,n)=>{let r=!1;for(let i of rr(t)){let t=function(t,e,n){let r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(t,e,n){let r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?nR(r,i):eq()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return -1*r;default:return eq()}}(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0});return e.forEach((e,r)=>{rh(t,r)&&(n=n.add(r))}),n}ns(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;let i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(t,e,n){return eF()<=a.DEBUG&&eV("QueryEngine","Using full collection scan to execute query:",rl(e)),this.Ji.getDocumentsMatchingQuery(t,e,nn.min(),n)}rs(t,e,n,r){return this.Ji.getDocumentsMatchingQuery(t,n,r).next(t=>(e.forEach(e=>{t=t.insert(e.key,e)}),t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t,e,n,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new nc(e6),this._s=new ru(t=>n9(t),rt),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ie(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}}async function ib(t,e){return await t.persistence.runTransaction("Handle user change","readonly",n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next(i=>(r=i,t.ls(e),t.mutationQueue.getAllMutationBatches(n))).next(e=>{let i=[],s=[],o=rv();for(let t of r)for(let e of(i.push(t.batchId),t.mutations))o=o.add(e.key);for(let t of e)for(let e of(s.push(t.batchId),t.mutations))o=o.add(e.key);return t.localDocuments.getDocuments(n,o).next(t=>({hs:t,removedBatchIds:i,addedBatchIds:s}))})})}class iE{constructor(){this.activeTargetIds=rw}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class iT{constructor(){this.so=new iE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,n){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new iE,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){for(let t of(eV("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.ho))t(0)}lo(){for(let t of(eV("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.ho))t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iA=null;function ix(){return null===iA?iA=0x10000000+Math.round(0x80000000*Math.random()):iA++,"0x"+iA.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="WebChannelConnection";class iN extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=e+"://"+t.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(t,e,n,r,i){let s=ix(),o=this.xo(t,e.toUriEncodedString());eV("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);let a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(t,o,a,n).then(e=>(eV("RestConnection",`Received RPC '${t}' ${s}: `,e),e),e=>{throw e$("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e})}Lo(t,e,n,r,i,s){return this.Mo(t,e,n,r,i)}Oo(t,e,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eB}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((e,n)=>t[n]=e),n&&n.headers.forEach((e,n)=>t[n]=e)}xo(t,e){let n=iS[t];return`${this.Do}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,n,r){let i=ix();return new Promise((s,o)=>{let a=new h;a.setWithCredentials(!0),a.listenOnce(f.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case c.NO_ERROR:let e=a.getResponseJson();eV(iD,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case c.TIMEOUT:eV(iD,`RPC '${t}' ${i} timed out`),o(new eH(eG.DEADLINE_EXCEEDED,"Request time out"));break;case c.HTTP_ERROR:let n=a.getStatus();if(eV(iD,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);let e=null==t?void 0:t.error;if(e&&e.status&&e.message){let t=function(t){let e=t.toLowerCase().replace(/_/g,"-");return Object.values(eG).indexOf(e)>=0?e:eG.UNKNOWN}(e.status);o(new eH(t,e.message))}else o(new eH(eG.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new eH(eG.UNAVAILABLE,"Connection failed."));break;default:eq()}}finally{eV(iD,`RPC '${t}' ${i} completed.`)}});let l=JSON.stringify(r);eV(iD,`RPC '${t}' ${i} sending request:`,r),a.send(e,"POST",l,n,15)})}Bo(t,e,n){let r=ix(),i=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=m(),o=g(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;let h=i.join("");eV(iD,`Creating RPC '${t}' stream ${r}: ${h}`,a);let f=s.createWebChannel(h,a),c=!1,y=!1,v=new iC({Io:e=>{y?eV(iD,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(c||(eV(iD,`Opening RPC '${t}' stream ${r} transport.`),f.open(),c=!0),eV(iD,`RPC '${t}' stream ${r} sending:`,e),f.send(e))},To:()=>f.close()}),w=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(t){setTimeout(()=>{throw t},0)}})};return w(f,u.EventType.OPEN,()=>{y||(eV(iD,`RPC '${t}' stream ${r} transport opened.`),v.yo())}),w(f,u.EventType.CLOSE,()=>{y||(y=!0,eV(iD,`RPC '${t}' stream ${r} transport closed`),v.So())}),w(f,u.EventType.ERROR,e=>{y||(y=!0,e$(iD,`RPC '${t}' stream ${r} transport errored:`,e),v.So(new eH(eG.UNAVAILABLE,"The operation could not be completed")))}),w(f,u.EventType.MESSAGE,e=>{var n;if(!y){let i=e.data[0];i||eq();let s=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(s){eV(iD,`RPC '${t}' stream ${r} received error:`,s);let e=s.status,n=function(t){let e=E[t];if(void 0!==e)return function(t){if(void 0===t)return ej("GRPC error has no .code"),eG.UNKNOWN;switch(t){case E.OK:return eG.OK;case E.CANCELLED:return eG.CANCELLED;case E.UNKNOWN:return eG.UNKNOWN;case E.DEADLINE_EXCEEDED:return eG.DEADLINE_EXCEEDED;case E.RESOURCE_EXHAUSTED:return eG.RESOURCE_EXHAUSTED;case E.INTERNAL:return eG.INTERNAL;case E.UNAVAILABLE:return eG.UNAVAILABLE;case E.UNAUTHENTICATED:return eG.UNAUTHENTICATED;case E.INVALID_ARGUMENT:return eG.INVALID_ARGUMENT;case E.NOT_FOUND:return eG.NOT_FOUND;case E.ALREADY_EXISTS:return eG.ALREADY_EXISTS;case E.PERMISSION_DENIED:return eG.PERMISSION_DENIED;case E.FAILED_PRECONDITION:return eG.FAILED_PRECONDITION;case E.ABORTED:return eG.ABORTED;case E.OUT_OF_RANGE:return eG.OUT_OF_RANGE;case E.UNIMPLEMENTED:return eG.UNIMPLEMENTED;case E.DATA_LOSS:return eG.DATA_LOSS;default:return eq()}}(e)}(e),i=s.message;void 0===n&&(n=eG.INTERNAL,i="Unknown error status: "+e+" with message "+s.message),y=!0,v.So(new eH(n,i)),f.close()}else eV(iD,`RPC '${t}' stream ${r} received:`,i),v.bo(i)}}),w(o,p.STAT_EVENT,e=>{e.stat===d.PROXY?eV(iD,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===d.NOPROXY&&eV(iD,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function ik(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t){return new rX(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(t,e,n=1e3,r=1.5,i=6e4){this.ui=t,this.timerId=e,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-n);r>0&&eV("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(t,e,n,r,i,s,o,a){this.ui=t,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new iO(t,e)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==t?this.t_.reset():e&&e.code===eG.RESOURCE_EXHAUSTED?(ej(e.toString()),ej("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===eG.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;let t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,n])=>{this.Yo===e&&this.P_(t,n)},e=>{t(()=>{let t=new eH(eG.UNKNOWN,"Fetching auth token failed: "+e.message);return this.I_(t)})})}P_(t,e){let n=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(t=>{n(()=>this.I_(t))}),this.stream.onMessage(t=>{n(()=>1==++this.e_?this.E_(t):this.onNext(t))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return eV("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(eV("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iP extends iL{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return t.streamToken||eq(),this.lastStreamToken=t.streamToken,t.writeResults&&0!==t.writeResults.length&&eq(),this.listener.f_()}onNext(t){var e,n;t.streamToken||eq(),this.lastStreamToken=t.streamToken,this.t_.reset();let r=(e=t.writeResults,n=t.commitTime,e&&e.length>0?(void 0!==n||eq(),e.map(t=>{let e;return(e=t.updateTime?rY(t.updateTime):rY(n)).isEqual(e8.min())&&(e=rY(n)),new rR(e,t.transformResults||[])})):[]),i=rY(t.commitTime);return this.listener.g_(i,r)}p_(){var t;let e={};e.database=new e7(["projects",(t=this.serializer).databaseId.projectId,"databases",t.databaseId.database]).canonicalString(),this.a_(e)}m_(t){let e={streamToken:this.lastStreamToken,writes:t.map(t=>(function(t,e){var n;let r;if(e instanceof rF)r={update:r1(t,e.key,e.value)};else if(e instanceof rq)r={delete:r0(t,e.key)};else if(e instanceof rV)r={update:r1(t,e.key,e.data),updateMask:function(t){let e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}(e.fieldMask)};else{if(!(e instanceof rG))return eq();r={verify:r0(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(t=>(function(t,e){let n=e.transform;if(n instanceof rI)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rA)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof rS)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rD)return{fieldPath:e.field.canonicalString(),increment:n.Pe};throw eq()})(0,t))),e.precondition.isNone||(r.currentDocument=void 0!==(n=e.precondition).updateTime?{updateTime:rW(t,n.updateTime.toTimestamp())}:void 0!==n.exists?{exists:n.exists}:eq()),r})(this.serializer,t))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new eH(eG.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Mo(t,rZ(e,n),r,i,s)).catch(t=>{throw"FirebaseError"===t.name?(t.code===eG.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new eH(eG.UNKNOWN,t.toString())})}Lo(t,e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Lo(t,rZ(e,n),r,s,o,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===eG.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new eH(eG.UNKNOWN,t.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iB{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ej(e),this.D_=!1):eV("OnlineStateTracker",e)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(t=>{n.enqueueAndForget(async()=>{ij(this)&&(eV("RemoteStore","Restarting streams for network reachability change."),await async function(t){t.L_.add(4),await iV(t),t.q_.set("Unknown"),t.L_.delete(4),await iF(t)}(this))})}),this.q_=new iB(n,r)}}async function iF(t){if(ij(t))for(let e of t.B_)await e(!0)}async function iV(t){for(let e of t.B_)await e(!1)}function ij(t){return 0===t.L_.size}async function i$(t,e,n){if(!no(e))throw e;t.L_.add(1),await iV(t),t.q_.set("Offline"),n||(n=()=>{var e;return(e=t.localStore).persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}),t.asyncQueue.enqueueRetryable(async()=>{eV("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await iF(t)})}function iz(t,e){return e().catch(n=>i$(t,n,e))}async function iq(t){let e=iZ(t),n=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;ij(t)&&t.O_.length<10;)try{let r=await function(t,e){return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}(t.localStore,n);if(null===r){0===t.O_.length&&e.o_();break}n=r.batchId,function(t,e){t.O_.push(e);let n=iZ(t);n.r_()&&n.V_&&n.m_(e.mutations)}(t,r)}catch(e){await i$(t,e)}iG(t)&&iH(t)}function iG(t){return ij(t)&&!iZ(t).n_()&&t.O_.length>0}function iH(t){iZ(t).start()}async function iK(t){iZ(t).p_()}async function iQ(t){let e=iZ(t);for(let n of t.O_)e.m_(n.mutations)}async function iX(t,e,n){let r=t.O_.shift(),i=rK.from(r,e,n);await iz(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await iq(t)}async function iW(t,e){e&&iZ(t).V_&&await async function(t,e){var n;if(function(t){switch(t){default:return eq();case eG.CANCELLED:case eG.UNKNOWN:case eG.DEADLINE_EXCEEDED:case eG.RESOURCE_EXHAUSTED:case eG.INTERNAL:case eG.UNAVAILABLE:case eG.UNAUTHENTICATED:return!1;case eG.INVALID_ARGUMENT:case eG.NOT_FOUND:case eG.ALREADY_EXISTS:case eG.PERMISSION_DENIED:case eG.FAILED_PRECONDITION:case eG.ABORTED:case eG.OUT_OF_RANGE:case eG.UNIMPLEMENTED:case eG.DATA_LOSS:return!0}}(n=e.code)&&n!==eG.ABORTED){let n=t.O_.shift();iZ(t).s_(),await iz(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),await iq(t)}}(t,e),iG(t)&&iH(t)}async function iY(t,e){t.asyncQueue.verifyOperationInProgress(),eV("RemoteStore","RemoteStore received new credentials");let n=ij(t);t.L_.add(3),await iV(t),n&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await iF(t)}async function iJ(t,e){e?(t.L_.delete(2),await iF(t)):e||(t.L_.add(2),await iV(t),t.q_.set("Unknown"))}function iZ(t){var e,n,r;return t.U_||(t.U_=(e=t.datastore,n=t.asyncQueue,r={Eo:()=>Promise.resolve(),Ro:iK.bind(null,t),mo:iW.bind(null,t),f_:iQ.bind(null,t),g_:iX.bind(null,t)},e.w_(),new iP(n,e.connection,e.authCredentials,e.appCheckCredentials,e.serializer,r)),t.B_.push(async e=>{e?(t.U_.s_(),await iq(t)):(await t.U_.stop(),t.O_.length>0&&(eV("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new eK,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){let s=new i0(t,e,Date.now()+n,r,i);return s.start(n),s}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new eH(eG.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i1(t,e){if(ej("AsyncQueue",`${e}: ${t}`),no(t))return new eH(eG.UNAVAILABLE,`${e}: ${t}`);throw t}class i2{constructor(){this.queries=i6(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,e){let n=t.queries;t.queries=i6(),n.forEach((t,n)=>{for(let t of n.j_)t.onError(e)})}(this,new eH(eG.ABORTED,"Firestore shutting down"))}}function i6(){return new ru(t=>ra(t),ro)}(I=_||(_={})).ea="default",I.Cache="cache";class i5{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ru(t=>ra(t),ro),this.Ma=new Map,this.xa=new Set,this.Oa=new nc(ne.comparator),this.Na=new Map,this.La=new io,this.Ba={},this.ka=new Map,this.qa=r7.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function i3(t,e,n){var r;let i=(t.remoteStore.remoteSyncer.applySuccessfulWrite=i4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=i7.bind(null,t),t);try{let t;let s=await function(t,e){let n,r;let i=e3.now(),s=e.reduce((t,e)=>t.add(e.key),rv());return t.persistence.runTransaction("Locally write mutations","readwrite",o=>{let a=rf,l=rv();return t.cs.getEntries(o,s).next(t=>{(a=t).forEach((t,e)=>{e.isValidDocument()||(l=l.add(t))})}).next(()=>t.localDocuments.getOverlayedDocuments(o,a)).next(r=>{n=r;let s=[];for(let t of e){let e=function(t,e){let n=null;for(let r of t.fieldTransforms){let t=e.data.field(r.field),i=r_(r.transform,t||null);null!=i&&(null===n&&(n=n$.empty()),n.set(r.field,i))}return n||null}(t,n.get(t.key).overlayedDocument);null!=e&&s.push(new rV(t.key,e,function t(e){let n=[];return nu(e.fields,(e,r)=>{let i=new nt([e]);if(nU(r)){let e=t(r.mapValue).fields;if(0===e.length)n.push(i);else for(let t of e)n.push(i.child(t))}else n.push(i)}),new ny(n)}(e.value.mapValue),rO.exists(!0)))}return t.mutationQueue.addMutationBatch(o,i,s,e)}).next(e=>{r=e;let i=e.applyToLocalDocumentSet(n,l);return t.documentOverlayCache.saveOverlays(o,e.batchId,i)})}).then(()=>({batchId:r.batchId,changes:rp(n)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),r=s.batchId,(t=i.Ba[i.currentUser.toKey()])||(t=new nc(e6)),t=t.insert(r,n),i.Ba[i.currentUser.toKey()]=t,await se(i,s.changes),await iq(i.remoteStore)}catch(e){let t=i1(e,"Failed to persist write");n.reject(t)}}function i8(t,e,n){var r;if(t.isPrimaryClient&&0===n||!t.isPrimaryClient&&1===n){let n;let i=[];t.Fa.forEach((t,n)=>{let r=n.view.Z_(e);r.snapshot&&i.push(r.snapshot)}),(r=t.eventManager).onlineState=e,n=!1,r.queries.forEach((t,r)=>{for(let t of r.j_)t.Z_(e)&&(n=!0)}),n&&function(t){t.Y_.forEach(t=>{t.next()})}(r),i.length&&t.Ca.d_(i),t.onlineState=e,t.isPrimaryClient&&t.sharedClientState.setOnlineState(e)}}async function i4(t,e){var n;let r=e.batch.batchId;try{let i=await (n=t.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{let r=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return(function(t,e,n,r){let i=n.batch,s=i.keys(),o=ns.resolve();return s.forEach(t=>{o=o.next(()=>r.getEntry(e,t)).next(e=>{let s=n.docVersions.get(t);null!==s||eq(),0>e.version.compareTo(s)&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))})}),o.next(()=>t.mutationQueue.removeMutationBatch(e,i))})(n,t,e,i).next(()=>i.apply(t)).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=rv();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e))).next(()=>n.localDocuments.getDocuments(t,r))});st(t,r,null),i9(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await se(t,i)}catch(t){await ni(t)}}async function i7(t,e,n){var r;try{let i=await (r=t.localStore).persistence.runTransaction("Reject batch","readwrite-primary",t=>{let n;return r.mutationQueue.lookupMutationBatch(t,e).next(e=>(null!==e||eq(),n=e.keys(),r.mutationQueue.removeMutationBatch(t,e))).next(()=>r.mutationQueue.performConsistencyCheck(t)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(t,n,e)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,n)).next(()=>r.localDocuments.getDocuments(t,n))});st(t,e,n),i9(t,e),t.sharedClientState.updateMutationState(e,"rejected",n),await se(t,i)}catch(t){await ni(t)}}function i9(t,e){(t.ka.get(e)||[]).forEach(t=>{t.resolve()}),t.ka.delete(e)}function st(t,e,n){let r=t.Ba[t.currentUser.toKey()];if(r){let i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),t.Ba[t.currentUser.toKey()]=r}}async function se(t,e,n){let r=[],i=[],s=[];t.Fa.isEmpty()||(t.Fa.forEach((o,a)=>{s.push(t.Ka(a,e,n).then(e=>{var s;if((e||n)&&t.isPrimaryClient){let r=e?!e.fromCache:null===(s=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===s?void 0:s.current;t.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(e){r.push(e);let t=im.Wi(a.targetId,e);i.push(t)}}))}),await Promise.all(s),t.Ca.d_(r),await async function(t,e){try{await t.persistence.runTransaction("notifyLocalViewChanges","readwrite",n=>ns.forEach(e,e=>ns.forEach(e.$i,r=>t.persistence.referenceDelegate.addReference(n,e.targetId,r)).next(()=>ns.forEach(e.Ui,r=>t.persistence.referenceDelegate.removeReference(n,e.targetId,r)))))}catch(t){if(!no(t))throw t;eV("LocalStore","Failed to update sequence numbers: "+t)}for(let n of e){let e=n.targetId;if(!n.fromCache){let n=t.os.get(e),r=n.snapshotVersion,i=n.withLastLimboFreeSnapshotVersion(r);t.os=t.os.insert(e,i)}}}(t.localStore,i))}async function sn(t,e){var n;if(!t.currentUser.isEqual(e)){eV("SyncEngine","User change. New user:",e.toKey());let r=await ib(t.localStore,e);t.currentUser=e,n="'waitForPendingWrites' promise is rejected due to a user change.",t.ka.forEach(t=>{t.forEach(t=>{t.reject(new eH(eG.CANCELLED,n))})}),t.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await se(t,r.hs)}}class sr{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=iR(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){var e;return e=this.persistence,new iw(e,new iv,t.initialUser,this.serializer)}Ga(t){return new id(ig.Zr,this.serializer)}Wa(t){return new iT}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sr.provider={build:()=>new sr};class si{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>i8(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=sn.bind(null,this.syncEngine),await iJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new i2}createDatastore(t){let e=iR(t.databaseInfo.databaseId),n=new iN(t.databaseInfo);return new iM(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){var e;return e=this.localStore,new iU(e,this.datastore,t.asyncQueue,t=>i8(this.syncEngine,t,0),iI.D()?new iI:new i_)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){let a=new i5(t,e,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){eV("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await iV(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}si.provider={build:()=>new si};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t,e,n,r,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=eM.UNAUTHENTICATED,this.clientId=e2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async t=>{eV("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t}),this.appCheckCredentials.start(n,t=>(eV("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new eK;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let e=i1(n,"Failed to shutdown persistence");t.reject(e)}}),t.promise}}async function so(t,e){t.asyncQueue.verifyOperationInProgress(),eV("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async t=>{r.isEqual(t)||(await ib(e.localStore,t),r=t)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function sa(t,e){t.asyncQueue.verifyOperationInProgress();let n=await sl(t);eV("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(t=>iY(e.remoteStore,t)),t.setAppCheckTokenChangeListener((t,n)=>iY(e.remoteStore,n)),t._onlineComponents=e}async function sl(t){if(!t._offlineComponents){if(t._uninitializedComponentsProvider){eV("FirestoreClient","Using user provided OfflineComponentProvider");try{await so(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===e.name?e.code===eG.FAILED_PRECONDITION||e.code===eG.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code))throw e;e$("Error using user provided cache. Falling back to memory cache: "+e),await so(t,new sr)}}else eV("FirestoreClient","Using default OfflineComponentProvider"),await so(t,new sr)}return t._offlineComponents}async function sh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(eV("FirestoreClient","Using user provided OnlineComponentProvider"),await sa(t,t._uninitializedComponentsProvider._online)):(eV("FirestoreClient","Using default OnlineComponentProvider"),await sa(t,new si))),t._onlineComponents}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){let e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t,e,n){if(!n)throw new eH(eG.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sd(t){if(!ne.isDocumentKey(t))throw new eH(eG.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sp(t){if(ne.isDocumentKey(t))throw new eH(eG.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sg(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{var e;let n=(e=t).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}return"function"==typeof t?"a function":eq()}function sm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new eH(eG.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=sg(t);throw new eH(eG.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new eH(eG.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new eH(eG.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new eH(eG.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=su(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new eH(eG.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new eH(eG.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new eH(eG.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){var e,n;return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class sv{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new eH(eG.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new eH(eG.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sy(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new eX;switch(t.type){case"firstParty":return new eZ(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new eH(eG.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let e=sf.get(t);e&&(eV("ComponentProvider","Removing Datastore"),sf.delete(t),e.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new sw(this.firestore,t,this._query)}}class sb{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sE(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new sb(this.firestore,t,this._key)}}class sE extends sw{constructor(t,e,n){super(t,e,new re(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new sb(this.firestore,null,new ne(t))}withConverter(t){return new sE(this.firestore,t,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new iO(this,"async_queue_retry"),this.Vu=()=>{let t=ik();t&&eV("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()},this.mu=t;let e=ik();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;let e=ik();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});let e=new eK;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!no(t))throw t;eV("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){let e=this.mu.then(()=>(this.du=!0,t().catch(t=>{let e;throw this.Eu=t,this.du=!1,ej("INTERNAL UNHANDLED ERROR: ",(e=t.message||"",t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e)),t}).then(t=>(this.du=!1,t))));return this.mu=e,e}enqueueAfterDelay(t,e,n){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);let r=i0.createAndSchedule(this,t,e,n,t=>this.yu(t));return this.Tu.push(r),r}fu(){this.Eu&&eq()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(let e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{for(let e of(this.Tu.sort((t,e)=>t.targetTimeMs-e.targetTimeMs),this.Tu))if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){let e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class s_ extends sv{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new sT,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new sT(t),this._firestoreClient=void 0,await t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t){this._byteString=t}static fromBase64String(t){try{return new sI(nw.fromBase64String(t))}catch(t){throw new eH(eG.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new sI(nw.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new eH(eG.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new eH(eG.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new eH(eG.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return e6(this._lat,t._lat)||e6(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t){this._values=(t||[]).map(t=>t)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=/^__.*__$/;class sN{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new rV(t,this.data,this.fieldMask,e,this.fieldTransforms):new rF(t,this.data,e,this.fieldTransforms)}}function sk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw eq()}}class sR{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new sR(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;let n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fu({path:n,xu:!1});return r.Ou(t),r}Nu(t){var e;let n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return sB(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(0===t.length)throw this.Bu("Document fields must not be empty");if(sk(this.Cu)&&sD.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class sO{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||iR(t)}Qu(t,e,n,r=!1){return new sR({Cu:t,methodName:e,qu:n,path:nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sL(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof e3||t instanceof sS||t instanceof sI||t instanceof sb||t instanceof sx||t instanceof sC)}function sP(t,e,n){if(!sL(n)||!("object"==typeof n&&null!==n&&(Object.getPrototypeOf(n)===Object.prototype||null===Object.getPrototypeOf(n)))){let r=sg(n);throw"an object"===r?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}const sM=RegExp("[~\\*/\\[\\]]");function sB(t,e,n,r,i){let s=r&&!r.isEmpty(),o=void 0!==i,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new eH(eG.INVALID_ARGUMENT,a+t+l)}new WeakMap,function(t=!0){eB="10.14.0",tU(new ts("firestore",(e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider("app").getImmediate(),s=new s_(new eY(e.getProvider("auth-internal")),new e1(e.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new eH(eG.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nS(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),t$(eP,"4.7.3",void 0),t$(eP,"4.7.3","esm2017")}();const sU=function(t,e){let n=(function(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)})("object"==typeof t?t:function(t=tR){let e=tL.get(t);if(!e&&t===tR&&Y())return tj();if(!e)throw tF.create("no-app",{appName:t});return e}(),"firestore").getImmediate({identifier:"string"==typeof t?t:"(default)"});if(!n._initialized){let t=W("firestore");t&&function(t,e,n,r={}){var i;let s=(t=sm(t,sv))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&e$("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=eM.MOCK_USER;else{e=function(t,e){if(t.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[z(JSON.stringify({alg:"none",type:"JWT"})),z(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);let s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new eH(eG.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new eM(s)}t._authCredentials=new eW(new eQ(e,n))}}(n,...t)}return n}(tj({apiKey:"AIzaSyBY2EBA0KnOYZDjxCwSHBMGcLaFjG6IL4o",authDomain:"greenify-e91f0.firebaseapp.com",projectId:"greenify-e91f0",storageBucket:"greenify-e91f0.appspot.com",messagingSenderId:"995349170683",appId:"1:995349170683:web:10bc48311fbf4a2710235e",measurementId:"G-1FP8G4JTGR"}));window.saveEmail=async function(){let t=document.getElementById("emailInput").value;if(t)try{await function(t,e){var n,r;let i=sm(t.firestore,s_),s=function(t,e,...n){if(t=ti(t),1==arguments.length&&(e=e2.newId()),sc("doc","path",e),t instanceof sv){let r=e7.fromString(e,...n);return sd(r),new sb(t,null,new ne(r))}{if(!(t instanceof sb||t instanceof sE))throw new eH(eG.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(e7.fromString(e,...n));return sd(r),new sb(t.firestore,t instanceof sE?t.converter:null,new ne(r))}}(t),o=(n=t.converter)?n.toFirestore(e):e;return(r=[(function(t,e,n,r,i,s={}){let o,a;let l=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);sP("Data must be an object, but it was:",l,r);let h=function t(e,n){let r={};return nf(e)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):nu(e,(e,i)=>{let s=function e(n,r){if(sL(n=ti(n)))return sP("Unsupported field value:",r,n),t(n,r);if(n instanceof sx)return function(t,e){if(!sk(e.Cu))throw e.Bu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Bu(`${t._methodName}() is not currently supported inside arrays`);let n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(n,r),null;if(void 0===n&&r.ignoreUndefinedProperties)return null;if(r.path&&r.fieldMask.push(r.path),n instanceof Array){if(r.settings.xu&&4!==r.Cu)throw r.Bu("Nested arrays are not supported");return function(t,n){let r=[],i=0;for(let s of t){let t=e(s,n.Lu(i));null==t&&(t={nullValue:"NULL_VALUE"}),r.push(t),i++}return{arrayValue:{values:r}}}(n,r)}return function(t,e){var n,r,i,s,o;if(null===(t=ti(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return n=e.serializer,"number"==typeof(i=r=t)&&Number.isInteger(i)&&!nl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER?rE(r):rb(n,r);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){let n=e3.fromDate(t);return{timestampValue:rW(e.serializer,n)}}if(t instanceof e3){let n=new e3(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:rW(e.serializer,n)}}if(t instanceof sS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof sI)return{bytesValue:(s=e.serializer,o=t._byteString,s.useProto3Json?o.toBase64():o.toUint8Array())};if(t instanceof sb){let n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:rJ(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof sC)return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:t.toArray().map(t=>{if("number"!=typeof t)throw e.Bu("VectorValues must only contain numeric values.");return rb(e.serializer,t)})}}}}};throw e.Bu(`Unsupported field value: ${sg(t)}`)}(n,r)}(i,n.Mu(e));null!=s&&(r[e]=s)}),{mapValue:{fields:r}}}(r,l);if(s.merge)o=new ny(l.fieldMask),a=l.fieldTransforms;else if(s.mergeFields){let t=[];for(let r of s.mergeFields){let i=function(t,e,n){if((e=ti(e))instanceof sA)return e._internalPath;if("string"==typeof e)return function(t,e,n){if(e.search(sM)>=0)throw sB(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,void 0);try{return new sA(...e.split("."))._internalPath}catch(n){throw sB(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,void 0)}}(t,e);throw sB("Field path arguments must be of type string or ",t,!1,void 0,n)}(e,r,n);if(!l.contains(i))throw new eH(eG.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);(function(t,e){return t.some(t=>t.isEqual(e))})(t,i)||t.push(i)}o=new ny(t),a=l.fieldTransforms.filter(t=>o.covers(t.field))}else o=null,a=l.fieldTransforms;return new sN(new n$(h),o,a)})(function(t){let e=t._freezeSettings(),n=iR(t._databaseId);return new sO(t._databaseId,!!e.ignoreUndefinedProperties,n)}(t.firestore),"addDoc",s._key,o,null!==t.converter,{}).toMutation(s._key,rO.exists(!1))],function(t,e){let n=new eK;return t.asyncQueue.enqueueAndForget(async()=>i3(await sh(t).then(t=>t.syncEngine),e,n)),n.promise}(function(t){if(t._terminated)throw new eH(eG.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function(t){var e,n,r,i,s,o;let a=t._freezeSettings(),l=(i=t._databaseId,s=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",o=t._persistenceKey,new nx(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,su(a.experimentalLongPollingOptions),a.useFetchStreams));t._componentsProvider||(null===(n=a.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=a.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new ss(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(t){let e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}(t),t._firestoreClient}(i),r)).then(()=>s)}(function(t,e,...n){if(t=ti(t),sc("collection","path",e),t instanceof sv){let r=e7.fromString(e,...n);return sp(r),new sE(t,null,r)}{if(!(t instanceof sb||t instanceof sE))throw new eH(eG.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(e7.fromString(e,...n));return sp(r),new sE(t.firestore,null,r)}}(sU,"Email"),{email:t}),console.log("Email successfully saved!")}catch(t){console.error("Error saving email: ",t)}else console.log("Email input is empty!")};</script></head><body> <div class="error"> <section class="navigation-wrapper"> <header class="navigation1"> <div class="dalle-2024-09-30-201437-a-group"> <img class="dalle-2024-09-30-201437-a1" loading="lazy" alt src="/dalle-20240930-201437--a-simplified-and-monochromatic-logo-concept-for-a-renewable-energy-crowdfunding-platform-named-greenify-the-design-features-a-single-object-that-co-1@2x.2fc4e1f8.png"> <div class="greenify-wrapper"> <a class="greenify1">Greenify</a> </div> </div> <div class="container8"> <div class="list19"> <div class="component-101"> <div class="component-823"> <a class="text23">Invest</a> </div> </div> <div class="component-824"> <div class="text24">why invest</div> </div> <div class="component-824"> <a class="text25">How it works</a> </div> <div class="component-823"> <div class="text26">Propose</div> </div> <div class="component-823"> <a class="text27">Blog</a> </div> </div> </div> </header> </section> <section class="heading-2-our-projects-100-wrapper"> <h1 class="heading-21"> Page Not Found  But Stay Connected with Greenify! </h1> </section> <section class="form-content-wrapper"> <div class="form-content"> <div class="thank-you-for-container"> <p class="thank-you-for"> Thank you for your interest in Greenify. Please be aware that this website is part of a market study to assess demand for a future renewable energy investment platform. The platform is not yet fully functional, and no transactions or investments can be made at this time. </p> <p class="thank-you-for">&nbsp;</p> <p class="thank-you-for"> However, wed love to keep you informed about our progress and the official launch! Please enter your email below to receive updates and be the first to know when Greenify becomes available. </p> </div> <div class="enter-your-email">Enter your email address:</div> <input type="email" class="form-content-child" id="emailInput"> <button id="submitButton" onclick="saveEmail()">Submit</button> </div> </section> <footer class="background34"> <div class="paragraph1"> <div class="the-purpose-of-container2"> <span class="the-purpose-of-container3"> <p class="thank-you-for"> The purpose of this website is to gage the markets interest in a product like this one this is not a company and none of the advertised investments are related with Greenify in any way. This </p> <p class="thank-you-for"> projects are real projects and the links will allow the user to go to the proper place to invest in this projects. </p> </span> </div> <b class="heading-56">THE PLATFORM</b> <div class="greenify-does-not-container1"> <p class="thank-you-for"> Greenify does not offer financial advice and none of the proposals published on the portal should be </p> <p class="thank-you-for"> considered as such. The investments presented on the portal are proposed exclusively by the relevant </p> <p class="thank-you-for"> bidders, who assume all responsibility in this regard. Each investment must be made in relation to one's </p> <p class="thank-you-for"> financial capacity and to bear losses, favoring a logic of risk diversification. </p> </div> </div> <div class="ener-crowd-content-parent"> <div class="ener-crowd-content"> <div class="container9"> <b class="heading-57">Greenify</b> <div class="tabpanel-list3"> <div class="component-101"> <div class="text28">Who we are</div> </div> <div class="component-101"> <div class="text29">Ecosystem</div> </div> <div class="component-101"> <div class="text28">Ethical Committee</div> </div> <div class="component-101"> <div class="text31">Statistics</div> </div> <div class="component-101"> <div class="text32">FAQ</div> </div> <div class="component-101"> <div class="text33">Contacts</div> </div> </div> </div> <div class="container-parent1"> <div class="container10"> <b class="heading-57">LEGAL</b> <div class="tabpanel-list4"> <div class="component-101"> <div class="text28">Greenify Services Agreement</div> </div> <div class="component-101"> <div class="text28">Greenify Terms and Conditions</div> </div> <div class="component-101"> <a class="text36" href="https://www.ener2crowd.com/frontend/contents/contracts/lemonway.pdf" target="_blank">LemonWay Terms and Conditions</a> </div> <div class="component-101"> <div class="text28">Investor Education</div> </div> <div class="component-101"> <div class="text28">Customer information</div> </div> </div> </div> <div class="container-frame"> <div class="container11"> <b class="heading-59">POLICY</b> <div class="tabpanel-list5"> <div class="component-101"> <a class="text39">Privacy</a> </div> <div class="component-101"> <div class="text40">Cookie</div> </div> <div class="component-101"> <div class="text28">Reviews</div> </div> <div class="component-101"> <div class="text42">Fraud prevention</div> </div> <div class="component-101"> <div class="text28">Conflict of interest management</div> </div> <div class="component-101"> <div class="text28">Complaint management</div> </div> <div class="component-101"> <div class="text28">Code of Ethics</div> </div> </div> </div> </div> </div> </div> <div class="ener-crowd-content"> <div class="container12"> <b class="heading-57">Payment methods</b> <img class="img-cardspng-icon1" loading="lazy" alt src="/imgcardspng@2x.94b83d9e.png"> <div class="invest-with-credit1"> Invest with credit card or bank transfer </div> </div> <div class="container-parent3"> <div class="container13"> <img class="logo-lemonway-footerpng-icon1" loading="lazy" alt src="/logolemonwayfooterpng@2x.2bd5374b.png"> <div class="the-payment-process-container1"> <p class="thank-you-for"> The payment process is guaranteed by LemonWay, a </p> <p class="thank-you-for"> Payment Institution authorized to operate throughout </p> <p class="thank-you-for">the European Union.</p> </div> </div> </div> </div> </div> </footer> </div> <script>document.getElementById("submitButton").addEventListener("click",saveEmail);var n=document.getElementById("component2Container");n&&n.addEventListener("click",function(){window.open("https://www.facebook.com/ener2crowd")});var e=document.getElementById("component2Container1");e&&e.addEventListener("click",function(){window.open("https://www.linkedin.com/company/ener2crowd/")});var t=document.getElementById("component2Container2");t&&t.addEventListener("click",function(){window.open("https://www.instagram.com/ener2crowd/")});var o=document.getElementById("component2Container3");o&&o.addEventListener("click",function(){window.open("https://t.me/e2c_community")});var c=document.getElementById("component2Container4");c&&c.addEventListener("click",function(){window.open("https://www.youtube.com/channel/UCEurEsjliT2hVdb97UCWQWw")});</script> </body></html>